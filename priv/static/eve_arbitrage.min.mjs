var m=class{withFields(t){let r=Object.keys(this).map(n=>n in t?t[n]:this[n]);return new this.constructor(...r)}},ce=class{static fromArray(t,r){let n=r||new ct;for(let i=t.length-1;i>=0;--i)n=new We(t[i],n);return n}[Symbol.iterator](){return new ro(this)}toArray(){return[...this]}atLeastLength(t){let r=this;for(;t-- >0&&r;)r=r.tail;return r!==void 0}hasLength(t){let r=this;for(;t-- >0&&r;)r=r.tail;return t===-1&&r instanceof ct}countLength(){let t=this,r=0;for(;t;)t=t.tail,r++;return r-1}};function w(e,t){return new We(e,t)}function l(e,t){return ce.fromArray(e,t)}var ro=class{#e;constructor(t){this.#e=t}next(){if(this.#e instanceof ct)return{done:!0};{let{head:t,tail:r}=this.#e;return this.#e=r,{value:t,done:!1}}}},ct=class extends ce{},We=class extends ce{constructor(t,r){super(),this.head=t,this.tail=r}},Kt=class{bitSize;byteSize;bitOffset;rawBuffer;constructor(t,r,n){if(!(t instanceof Uint8Array))throw globalThis.Error("BitArray can only be constructed from a Uint8Array");if(this.bitSize=r??t.length*8,this.byteSize=Math.trunc((this.bitSize+7)/8),this.bitOffset=n??0,this.bitSize<0)throw globalThis.Error(`BitArray bit size is invalid: ${this.bitSize}`);if(this.bitOffset<0||this.bitOffset>7)throw globalThis.Error(`BitArray bit offset is invalid: ${this.bitOffset}`);if(t.length!==Math.trunc((this.bitOffset+this.bitSize+7)/8))throw globalThis.Error("BitArray buffer length is invalid");this.rawBuffer=t}byteAt(t){if(!(t<0||t>=this.byteSize))return Qn(this.rawBuffer,this.bitOffset,t)}equals(t){if(this.bitSize!==t.bitSize)return!1;let r=Math.trunc(this.bitSize/8);if(this.bitOffset===0&&t.bitOffset===0){for(let i=0;i<r;i++)if(this.rawBuffer[i]!==t.rawBuffer[i])return!1;let n=this.bitSize%8;if(n){let i=8-n;if(this.rawBuffer[r]>>i!==t.rawBuffer[r]>>i)return!1}}else{for(let i=0;i<r;i++){let s=Qn(this.rawBuffer,this.bitOffset,i),o=Qn(t.rawBuffer,t.bitOffset,i);if(s!==o)return!1}let n=this.bitSize%8;if(n){let i=Qn(this.rawBuffer,this.bitOffset,r),s=Qn(t.rawBuffer,t.bitOffset,r),o=8-n;if(i>>o!==s>>o)return!1}}return!0}get buffer(){if(Ou("buffer","Use BitArray.byteAt() or BitArray.rawBuffer instead"),this.bitOffset!==0||this.bitSize%8!==0)throw new globalThis.Error("BitArray.buffer does not support unaligned bit arrays");return this.rawBuffer}get length(){if(Ou("length","Use BitArray.bitSize or BitArray.byteSize instead"),this.bitOffset!==0||this.bitSize%8!==0)throw new globalThis.Error("BitArray.length does not support unaligned bit arrays");return this.rawBuffer.length}};function Qn(e,t,r){if(t===0)return e[r]??0;{let n=e[r]<<t&255,i=e[r+1]>>8-t;return n|i}}var Zn=class{constructor(t){this.value=t}},ju={};function Ou(e,t){ju[e]||(console.warn(`Deprecated BitArray.${e} property used in JavaScript FFI code. ${t}.`),ju[e]=!0)}var Br=class e extends m{static isResult(t){return t instanceof e}},k=class extends Br{constructor(t){super(),this[0]=t}isOk(){return!0}},S=class extends Br{constructor(t){super(),this[0]=t}isOk(){return!1}};function J(e,t){let r=[e,t];for(;r.length;){let n=r.pop(),i=r.pop();if(n===i)continue;if(!Su(n)||!Su(i)||!Bf(n,i)||Ef(n,i)||Af(n,i)||zf(n,i)||Tf(n,i)||Cf(n,i)||Mf(n,i))return!1;let o=Object.getPrototypeOf(n);if(o!==null&&typeof o.equals=="function")try{if(n.equals(i))continue;return!1}catch{}let[a,u]=Lf(n);for(let c of a(n))r.push(u(n,c),u(i,c))}return!0}function Lf(e){if(e instanceof Map)return[t=>t.keys(),(t,r)=>t.get(r)];{let t=e instanceof globalThis.Error?["message"]:[];return[r=>[...t,...Object.keys(r)],(r,n)=>r[n]]}}function Ef(e,t){return e instanceof Date&&(e>t||e<t)}function Af(e,t){return!(e instanceof Kt)&&e.buffer instanceof ArrayBuffer&&e.BYTES_PER_ELEMENT&&!(e.byteLength===t.byteLength&&e.every((r,n)=>r===t[n]))}function zf(e,t){return Array.isArray(e)&&e.length!==t.length}function Tf(e,t){return e instanceof Map&&e.size!==t.size}function Cf(e,t){return e instanceof Set&&(e.size!=t.size||[...e].some(r=>!t.has(r)))}function Mf(e,t){return e instanceof RegExp&&(e.source!==t.source||e.flags!==t.flags)}function Su(e){return typeof e=="object"&&e!==null}function Bf(e,t){return typeof e!="object"&&typeof t!="object"&&(!e||!t)||[Promise,WeakSet,WeakMap,Function].some(n=>e instanceof n)?!1:e.constructor===t.constructor}function Mt(e,t){return t===0?0:e%t}function Bt(e,t){return Math.trunc(Ne(e,t))}function Ne(e,t){return t===0?0:e/t}function z(e,t,r,n,i,s){let o=new globalThis.Error(i);o.gleam_error=e,o.module=t,o.line=r,o.function=n,o.fn=n;for(let a in s)o[a]=s[a];return o}var j=class extends m{constructor(t){super(),this[0]=t}},C=class extends m{};function no(e){return J(e,new C)}function qi(e,t){if(e instanceof j){let r=e[0];return new k(r)}else return new S(t)}function qt(e){if(e.isOk()){let t=e[0];return new j(t)}else return new C}function Nt(e,t){return e instanceof j?e[0]:t}function qr(e,t){return e instanceof j?e[0]:t()}function Ni(e,t){if(e instanceof j){let r=e[0];return new j(t(r))}else return new C}var ie=class extends m{},te=class extends m{},se=class extends m{};function Nr(e,t){return e===t?new te:e<t?new ie:new se}function qf(e){return-1*e}function ei(e){return e>=0?io(e):0-io(qf(e))}function Ir(e,t){if(t<=0){let n=so(10,-t);return ei(Ne(e,n))*n}else{let n=so(10,t);return Ne(ei(e*n),n)}}function _r(e,t){return e===t?new te:e<t?new ie:new se}function Eu(e,t){return e<t?e:t}var ae=class extends m{},wt=class extends m{};function If(e,t){for(;;){let r=e,n=t;if(r.atLeastLength(1))e=r.tail,t=n+1;else return n}}function nt(e){return If(e,0)}function Dr(e,t){for(;;){let r=e,n=t;if(r.hasLength(0))return n;{let i=r.head;e=r.tail,t=w(i,n)}}}function Y(e){return Dr(e,l([]))}function Ur(e){return J(e,l([]))}function Fr(e,t){for(;;){let r=e,n=t;if(r.hasLength(0))return!1;if(r.atLeastLength(1)&&J(r.head,n)){let i=r.head;return!0}else e=r.tail,t=n}}function Pf(e,t,r){for(;;){let n=e,i=t,s=r;if(n.hasLength(0))return Y(s);{let o=n.head,a=n.tail,u;i(o)?u=w(o,s):u=s;let f=u;e=a,t=i,r=f}}}function Wr(e,t){return Pf(e,t,l([]))}function Df(e,t,r){for(;;){let n=e,i=t,s=r;if(n.hasLength(0))return Y(s);{let o=n.head;e=n.tail,t=i,r=w(i(o),s)}}}function W(e,t){return Df(e,t,l([]))}function Uf(e,t,r){for(;;){let n=e,i=t,s=r;if(n.hasLength(0))return new k(Y(s));{let o=n.head,a=n.tail,u=i(o);if(u.isOk()){let c=u[0];e=a,t=i,r=w(c,s)}else{let c=u[0];return new S(c)}}}}function lo(e,t){return Uf(e,t,l([]))}function Ff(e,t){for(;;){let r=e,n=t;if(n<=0)return r;if(r.hasLength(0))return l([]);e=r.tail,t=n-1}}function Wf(e,t){for(;;){let r=e,n=t;if(r.hasLength(0))return n;{let i=r.head;e=r.tail,t=w(i,n)}}}function pe(e,t){return Wf(Y(e),t)}function Rr(e,t){return w(t,e)}function Rf(e,t){for(;;){let r=e,n=t;if(r.hasLength(0))return Y(n);{let i=r.head;e=r.tail,t=Dr(i,n)}}}function bt(e){return Rf(e,l([]))}function Z(e,t,r){for(;;){let n=e,i=t,s=r;if(n.hasLength(0))return i;{let o=n.head;e=n.tail,t=s(i,o),r=s}}}function Hf(e,t){for(;;){let r=e,n=t;if(r.hasLength(0))return new S(void 0);{let i=r.head,s=r.tail,o=n(i);if(o.isOk()){let a=o[0];return new k(a)}else e=s,t=n}}}function zu(e,t){for(;;){let r=e,n=t;if(r.hasLength(0))return!0;{let i=r.head,s=r.tail;if(n(i))e=s,t=n;else return!1}}}function Gf(e,t,r){for(;;){let n=e,i=t,s=r;if(n.hasLength(0))return Y(s);{let o=n.head,a=n.tail;Cu(i,o)?(e=a,t=i,r=s):(e=a,t=H(i,o,void 0),r=w(o,s))}}}function Tu(e){return Gf(e,Re(),l([]))}function Vf(e,t,r,n,i,s){for(;;){let o=e,a=t,u=r,c=n,f=i,p=s,_=w(f,u);if(o.hasLength(0))return c instanceof ae?w(Y(_),p):w(_,p);{let d=o.head,h=o.tail,y=a(f,d);if(y instanceof se&&c instanceof wt)e=h,t=a,r=_,n=c,i=d,s=p;else if(y instanceof ie&&c instanceof ae)e=h,t=a,r=_,n=c,i=d,s=p;else if(y instanceof te&&c instanceof ae)e=h,t=a,r=_,n=c,i=d,s=p;else if(y instanceof se&&c instanceof ae){let $;c instanceof ae?$=w(Y(_),p):$=w(_,p);let O=$;if(h.hasLength(0))return w(l([d]),O);{let v=h.head,L=h.tail,A,x=a(d,v);x instanceof ie?A=new ae:x instanceof te?A=new ae:A=new wt;let M=A;e=L,t=a,r=l([d]),n=M,i=v,s=O}}else if(y instanceof ie&&c instanceof wt){let $;c instanceof ae?$=w(Y(_),p):$=w(_,p);let O=$;if(h.hasLength(0))return w(l([d]),O);{let v=h.head,L=h.tail,A,x=a(d,v);x instanceof ie?A=new ae:x instanceof te?A=new ae:A=new wt;let M=A;e=L,t=a,r=l([d]),n=M,i=v,s=O}}else{let $;c instanceof ae?$=w(Y(_),p):$=w(_,p);let O=$;if(h.hasLength(0))return w(l([d]),O);{let v=h.head,L=h.tail,A,x=a(d,v);x instanceof ie?A=new ae:x instanceof te?A=new ae:A=new wt;let M=A;e=L,t=a,r=l([d]),n=M,i=v,s=O}}}}}function Jf(e,t,r,n){for(;;){let i=e,s=t,o=r,a=n;if(i.hasLength(0))return Dr(s,a);if(s.hasLength(0))return Dr(i,a);{let u=i.head,c=i.tail,f=s.head,p=s.tail,_=o(u,f);_ instanceof ie?(e=c,t=s,r=o,n=w(u,a)):_ instanceof se?(e=i,t=p,r=o,n=w(f,a)):(e=i,t=p,r=o,n=w(f,a))}}}function Kf(e,t,r){for(;;){let n=e,i=t,s=r;if(n.hasLength(0))return Y(s);if(n.hasLength(1)){let o=n.head;return Y(w(Y(o),s))}else{let o=n.head,a=n.tail.head,u=n.tail.tail,c=Jf(o,a,i,l([]));e=u,t=i,r=w(c,s)}}}function Yf(e,t,r,n){for(;;){let i=e,s=t,o=r,a=n;if(i.hasLength(0))return Dr(s,a);if(s.hasLength(0))return Dr(i,a);{let u=i.head,c=i.tail,f=s.head,p=s.tail,_=o(u,f);_ instanceof ie?(e=i,t=p,r=o,n=w(f,a)):_ instanceof se?(e=c,t=s,r=o,n=w(u,a)):(e=c,t=s,r=o,n=w(u,a))}}}function Xf(e,t,r){for(;;){let n=e,i=t,s=r;if(n.hasLength(0))return Y(s);if(n.hasLength(1)){let o=n.head;return Y(w(Y(o),s))}else{let o=n.head,a=n.tail.head,u=n.tail.tail,c=Yf(o,a,i,l([]));e=u,t=i,r=w(c,s)}}}function Qf(e,t,r){for(;;){let n=e,i=t,s=r;if(n.hasLength(0))return l([]);if(n.hasLength(1)&&i instanceof ae)return n.head;if(n.hasLength(1)&&i instanceof wt){let o=n.head;return Y(o)}else i instanceof ae?(e=Kf(n,s,l([])),t=new wt,r=s):(e=Xf(n,s,l([])),t=new ae,r=s)}}function Qt(e,t){if(e.hasLength(0))return l([]);if(e.hasLength(1)){let r=e.head;return l([r])}else{let r=e.head,n=e.tail.head,i=e.tail.tail,s,o=t(r,n);o instanceof ie?s=new ae:o instanceof te?s=new ae:s=new wt;let a=s,u=Vf(i,t,l([r]),a,n,l([]));return Qf(u,new ae,t)}}function Ii(e,t){return Hf(e,r=>{let n=r[0],i=r[1];return J(n,t)?new k(i):new S(void 0)})}function uo(e){for(;;){let t=e,r=n=>{if(n.hasLength(0))return l([]);if(n.hasLength(1)){let i=n.head;return l([i])}else{let i=n.head;return l([i])}};if(t.hasLength(0))return l([]);if(t.atLeastLength(1)&&t.head.hasLength(0))e=t.tail;else{let n=t,i,o=W(n,r);i=bt(o);let a=i,u=uo(W(n,c=>Ff(c,1)));return w(a,u)}}}function _o(e){return e===""}function Gr(e,t,r){let i=e,s=ao(i,t,r);return s}function Bu(e,t,r){if(r<0)return"";if(t<0){let s=ni(e)+t;return s<0?"":fo(e,s,r)}else return fo(e,t,r)}function ri(e,t){return t<0?e:Bu(e,0,ni(e)-t)}function rd(e,t){for(;;){let r=e,n=t;if(r.atLeastLength(1)){let i=r.head;e=r.tail,t=n+i}else return n}}function Ye(e){return rd(e,"")}function nd(e,t,r){for(;;){let n=e,i=t,s=r;if(i<=0)return s;e=n,t=i-1,r=s+n}}function mo(e,t){return nd(e,t,"")}function id(e,t){let r=ni(t),n=Bt(e,r),i=Mt(e,r);return mo(t,n)+Bu(t,0,i)}function ho(e,t,r){let n=ni(e),i=t-n;return i<=0?e:id(i,r)+e}function Vr(e){let r=Nu(e);return Iu(r)}function mr(e,t){if(t==="")return co(e);{let n=e,i=po(n,t);return W(i,oe)}}function Jr(e){let t=yt(e);return t}function Fu(e){return!!e.isOk()}function He(e,t){if(e.isOk()){let r=e[0];return new k(t(r))}else{let r=e[0];return new S(r)}}function hr(e,t){if(e.isOk()){let r=e[0];return new k(r)}else{let r=e[0];return new S(t(r))}}function ze(e,t){if(e.isOk()){let r=e[0];return t(r)}else{let r=e[0];return new S(r)}}function Pt(e,t){return ze(e,t)}function Zt(e,t){return e.isOk()?e[0]:t}function Wu(e){return e.isOk(),e[0]}function Ru(e,t){return e.isOk()?e:t}function oi(e){return lo(e,t=>t)}function wo(e,t){if(e.isOk()){let r=e[0];return new k(r)}else return new S(t)}var Gu=new WeakMap,bo=new DataView(new ArrayBuffer(8)),yo=0;function vo(e){let t=Gu.get(e);if(t!==void 0)return t;let r=yo++;return yo===2147483647&&(yo=0),Gu.set(e,r),r}function ko(e,t){return e^t+2654435769+(e<<6)+(e>>2)|0}function Oo(e){let t=0,r=e.length;for(let n=0;n<r;n++)t=Math.imul(31,t)+e.charCodeAt(n)|0;return t}function Ju(e){bo.setFloat64(0,e);let t=bo.getInt32(0),r=bo.getInt32(4);return Math.imul(73244475,t>>16^t)^r}function ud(e){return Oo(e.toString())}function ad(e){let t=Object.getPrototypeOf(e);if(t!==null&&typeof t.hashCode=="function")try{let n=e.hashCode(e);if(typeof n=="number")return n}catch{}if(e instanceof Promise||e instanceof WeakSet||e instanceof WeakMap)return vo(e);if(e instanceof Date)return Ju(e.getTime());let r=0;if(e instanceof ArrayBuffer&&(e=new Uint8Array(e)),Array.isArray(e)||e instanceof Uint8Array)for(let n=0;n<e.length;n++)r=Math.imul(31,r)+it(e[n])|0;else if(e instanceof Set)e.forEach(n=>{r=r+it(n)|0});else if(e instanceof Map)e.forEach((n,i)=>{r=r+ko(it(n),it(i))|0});else{let n=Object.keys(e);for(let i=0;i<n.length;i++){let s=n[i],o=e[s];r=r+ko(it(o),Oo(s))|0}}return r}function it(e){if(e===null)return 1108378658;if(e===void 0)return 1108378659;if(e===!0)return 1108378657;if(e===!1)return 1108378656;switch(typeof e){case"number":return Ju(e);case"string":return Oo(e);case"bigint":return ud(e);case"object":return ad(e);case"symbol":return vo(e);case"function":return vo(e);default:return 0}}var kt=5,So=Math.pow(2,kt),cd=So-1,pd=So/2,fd=So/4,Pe=0,vt=1,Xe=2,$r=3,Lo={type:Xe,bitmap:0,array:[]};function ui(e,t){return e>>>t&cd}function Ui(e,t){return 1<<ui(e,t)}function dd(e){return e-=e>>1&1431655765,e=(e&858993459)+(e>>2&858993459),e=e+(e>>4)&252645135,e+=e>>8,e+=e>>16,e&127}function Eo(e,t){return dd(e&t-1)}function st(e,t,r){let n=e.length,i=new Array(n);for(let s=0;s<n;++s)i[s]=e[s];return i[t]=r,i}function _d(e,t,r){let n=e.length,i=new Array(n+1),s=0,o=0;for(;s<t;)i[o++]=e[s++];for(i[o++]=r;s<n;)i[o++]=e[s++];return i}function jo(e,t){let r=e.length,n=new Array(r-1),i=0,s=0;for(;i<t;)n[s++]=e[i++];for(++i;i<r;)n[s++]=e[i++];return n}function Ku(e,t,r,n,i,s){let o=it(t);if(o===n)return{type:$r,hash:o,array:[{type:Pe,k:t,v:r},{type:Pe,k:i,v:s}]};let a={val:!1};return ai(Ao(Lo,e,o,t,r,a),e,n,i,s,a)}function ai(e,t,r,n,i,s){switch(e.type){case vt:return md(e,t,r,n,i,s);case Xe:return Ao(e,t,r,n,i,s);case $r:return hd(e,t,r,n,i,s)}}function md(e,t,r,n,i,s){let o=ui(r,t),a=e.array[o];if(a===void 0)return s.val=!0,{type:vt,size:e.size+1,array:st(e.array,o,{type:Pe,k:n,v:i})};if(a.type===Pe)return J(n,a.k)?i===a.v?e:{type:vt,size:e.size,array:st(e.array,o,{type:Pe,k:n,v:i})}:(s.val=!0,{type:vt,size:e.size,array:st(e.array,o,Ku(t+kt,a.k,a.v,r,n,i))});let u=ai(a,t+kt,r,n,i,s);return u===a?e:{type:vt,size:e.size,array:st(e.array,o,u)}}function Ao(e,t,r,n,i,s){let o=Ui(r,t),a=Eo(e.bitmap,o);if((e.bitmap&o)!==0){let u=e.array[a];if(u.type!==Pe){let f=ai(u,t+kt,r,n,i,s);return f===u?e:{type:Xe,bitmap:e.bitmap,array:st(e.array,a,f)}}let c=u.k;return J(n,c)?i===u.v?e:{type:Xe,bitmap:e.bitmap,array:st(e.array,a,{type:Pe,k:n,v:i})}:(s.val=!0,{type:Xe,bitmap:e.bitmap,array:st(e.array,a,Ku(t+kt,c,u.v,r,n,i))})}else{let u=e.array.length;if(u>=pd){let c=new Array(32),f=ui(r,t);c[f]=Ao(Lo,t+kt,r,n,i,s);let p=0,_=e.bitmap;for(let d=0;d<32;d++){if((_&1)!==0){let h=e.array[p++];c[d]=h}_=_>>>1}return{type:vt,size:u+1,array:c}}else{let c=_d(e.array,a,{type:Pe,k:n,v:i});return s.val=!0,{type:Xe,bitmap:e.bitmap|o,array:c}}}}function hd(e,t,r,n,i,s){if(r===e.hash){let o=zo(e,n);if(o!==-1)return e.array[o].v===i?e:{type:$r,hash:r,array:st(e.array,o,{type:Pe,k:n,v:i})};let a=e.array.length;return s.val=!0,{type:$r,hash:r,array:st(e.array,a,{type:Pe,k:n,v:i})}}return ai({type:Xe,bitmap:Ui(e.hash,t),array:[e]},t,r,n,i,s)}function zo(e,t){let r=e.array.length;for(let n=0;n<r;n++)if(J(t,e.array[n].k))return n;return-1}function Di(e,t,r,n){switch(e.type){case vt:return $d(e,t,r,n);case Xe:return xd(e,t,r,n);case $r:return gd(e,n)}}function $d(e,t,r,n){let i=ui(r,t),s=e.array[i];if(s!==void 0){if(s.type!==Pe)return Di(s,t+kt,r,n);if(J(n,s.k))return s}}function xd(e,t,r,n){let i=Ui(r,t);if((e.bitmap&i)===0)return;let s=Eo(e.bitmap,i),o=e.array[s];if(o.type!==Pe)return Di(o,t+kt,r,n);if(J(n,o.k))return o}function gd(e,t){let r=zo(e,t);if(!(r<0))return e.array[r]}function To(e,t,r,n){switch(e.type){case vt:return wd(e,t,r,n);case Xe:return bd(e,t,r,n);case $r:return yd(e,n)}}function wd(e,t,r,n){let i=ui(r,t),s=e.array[i];if(s===void 0)return e;let o;if(s.type===Pe){if(!J(s.k,n))return e}else if(o=To(s,t+kt,r,n),o===s)return e;if(o===void 0){if(e.size<=fd){let a=e.array,u=new Array(e.size-1),c=0,f=0,p=0;for(;c<i;){let _=a[c];_!==void 0&&(u[f]=_,p|=1<<c,++f),++c}for(++c;c<a.length;){let _=a[c];_!==void 0&&(u[f]=_,p|=1<<c,++f),++c}return{type:Xe,bitmap:p,array:u}}return{type:vt,size:e.size-1,array:st(e.array,i,o)}}return{type:vt,size:e.size,array:st(e.array,i,o)}}function bd(e,t,r,n){let i=Ui(r,t);if((e.bitmap&i)===0)return e;let s=Eo(e.bitmap,i),o=e.array[s];if(o.type!==Pe){let a=To(o,t+kt,r,n);return a===o?e:a!==void 0?{type:Xe,bitmap:e.bitmap,array:st(e.array,s,a)}:e.bitmap===i?void 0:{type:Xe,bitmap:e.bitmap^i,array:jo(e.array,s)}}return J(n,o.k)?e.bitmap===i?void 0:{type:Xe,bitmap:e.bitmap^i,array:jo(e.array,s)}:e}function yd(e,t){let r=zo(e,t);if(r<0)return e;if(e.array.length!==1)return{type:$r,hash:e.hash,array:jo(e.array,r)}}function Yu(e,t){if(e===void 0)return;let r=e.array,n=r.length;for(let i=0;i<n;i++){let s=r[i];if(s!==void 0){if(s.type===Pe){t(s.v,s.k);continue}Yu(s,t)}}}var ot=class e{static fromObject(t){let r=Object.keys(t),n=e.new();for(let i=0;i<r.length;i++){let s=r[i];n=n.set(s,t[s])}return n}static fromMap(t){let r=e.new();return t.forEach((n,i)=>{r=r.set(i,n)}),r}static new(){return new e(void 0,0)}constructor(t,r){this.root=t,this.size=r}get(t,r){if(this.root===void 0)return r;let n=Di(this.root,0,it(t),t);return n===void 0?r:n.v}set(t,r){let n={val:!1},i=this.root===void 0?Lo:this.root,s=ai(i,0,it(t),t,r,n);return s===this.root?this:new e(s,n.val?this.size+1:this.size)}delete(t){if(this.root===void 0)return this;let r=To(this.root,0,it(t),t);return r===this.root?this:r===void 0?e.new():new e(r,this.size-1)}has(t){return this.root===void 0?!1:Di(this.root,0,it(t),t)!==void 0}entries(){if(this.root===void 0)return[];let t=[];return this.forEach((r,n)=>t.push([n,r])),t}forEach(t){Yu(this.root,t)}hashCode(){let t=0;return this.forEach((r,n)=>{t=t+ko(it(r),it(n))|0}),t}equals(t){if(!(t instanceof e)||this.size!==t.size)return!1;try{return this.forEach((r,n)=>{if(!J(t.get(n,!r),r))throw Vu}),!0}catch(r){if(r===Vu)return!1;throw r}}},Vu=Symbol();var Fi=void 0,Xu={};function oe(e){return e}function Ee(e){return/^[-+]?(\d+)$/.test(e)?new k(parseInt(e)):new S(Fi)}function Pr(e){return/^[-+]?(\d+)\.(\d+)([eE][-+]?\d+)?$/.test(e)?new k(parseFloat(e)):new S(Fi)}function B(e){return e.toString()}function Ke(e){let t=e.toString().replace("+","");if(t.indexOf(".")>=0)return t;{let r=t.indexOf("e");return r>=0?t.slice(0,r)+".0"+t.slice(r):t+".0"}}function ao(e,t,r){return typeof e.replaceAll<"u"?e.replaceAll(t,r):e.replace(new RegExp(t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"g"),r)}function ni(e){if(e==="")return 0;let t=Wi(e);if(t){let r=0;for(let n of t)r++;return r}else return e.match(/./gsu).length}function co(e){let t=Wi(e);return t?ce.fromArray(Array.from(t).map(r=>r.segment)):ce.fromArray(e.match(/./gsu))}var Qu;function Wi(e){if(globalThis.Intl&&Intl.Segmenter)return Qu||=new Intl.Segmenter,Qu.segment(e)[Symbol.iterator]()}function ii(e){let t,r=Wi(e);return r?t=r.next().value?.segment:t=e.match(/./su)?.[0],t?new k([t,e.slice(t.length)]):new S(Fi)}function xr(e){return[e.charCodeAt(0)|0,e.slice(1)]}function Ae(e){return e.toLowerCase()}function po(e,t){return ce.fromArray(e.split(t))}function fo(e,t,r){if(r<=0||t>=e.length)return"";let n=Wi(e);if(n){for(;t-- >0;)n.next();let i="";for(;r-- >0;){let s=n.next().value;if(s===void 0)break;i+=s.segment}return i}else return e.match(/./gsu).slice(t,t+r).join("")}function Le(e,t,r){return e.slice(t,t+r)}function si(e,t){return e.startsWith(t)}var Zu=[" ","	",`
`,"\v","\f","\r","\x85","\u2028","\u2029"].join(""),kd=new RegExp(`^[${Zu}]*`),jd=new RegExp(`[${Zu}]*$`);function Nu(e){return e.replace(kd,"")}function Iu(e){return e.replace(jd,"")}function Ge(e){console.log(e)}function tr(e){console.error(e)}function io(e){return Math.round(e)}function Xt(e){return Math.trunc(e)}function so(e,t){return Math.pow(e,t)}function Re(){return ot.new()}function li(e){return ce.fromArray(e.entries())}function ea(e,t){return t.delete(e)}function N(e,t){let r=e.get(t,Xu);return r===Xu?new S(Fi):new k(r)}function ta(e,t,r){return r.set(e,t)}function er(e){if(typeof e=="string")return"String";if(typeof e=="boolean")return"Bool";if(e instanceof Br)return"Result";if(e instanceof ce)return"List";if(e instanceof Kt)return"BitArray";if(e instanceof ot)return"Dict";if(Number.isInteger(e))return"Int";if(Array.isArray(e))return`Tuple of ${e.length} elements`;if(typeof e=="number")return"Float";if(e===null)return"Null";if(e===void 0)return"Nil";{let t=typeof e;return t.charAt(0).toUpperCase()+t.slice(1)}}function yt(e){let t=typeof e;if(e===!0)return"True";if(e===!1)return"False";if(e===null)return"//js(null)";if(e===void 0)return"Nil";if(t==="string")return Od(e);if(t==="bigint"||Number.isInteger(e))return e.toString();if(t==="number")return Ke(e);if(Array.isArray(e))return`#(${e.map(yt).join(", ")})`;if(e instanceof ce)return Ad(e);if(e instanceof Zn)return zd(e);if(e instanceof Kt)return`<<${Uu(e,"")}>>`;if(e instanceof m)return Ed(e);if(e instanceof ot)return Sd(e);if(e instanceof Set)return`//js(Set(${[...e].map(yt).join(", ")}))`;if(e instanceof RegExp)return`//js(${e})`;if(e instanceof Date)return`//js(Date("${e.toISOString()}"))`;if(e instanceof Function){let r=[];for(let n of Array(e.length).keys())r.push(String.fromCharCode(n+97));return`//fn(${r.join(", ")}) { ... }`}return Ld(e)}function Od(e){let t='"';for(let r=0;r<e.length;r++){let n=e[r];switch(n){case`
`:t+="\\n";break;case"\r":t+="\\r";break;case"	":t+="\\t";break;case"\f":t+="\\f";break;case"\\":t+="\\\\";break;case'"':t+='\\"';break;default:n<" "||n>"~"&&n<"\xA0"?t+="\\u{"+n.charCodeAt(0).toString(16).toUpperCase().padStart(4,"0")+"}":t+=n}}return t+='"',t}function Sd(e){let t="dict.from_list([",r=!0;return e.forEach((n,i)=>{r||(t=t+", "),t=t+"#("+yt(i)+", "+yt(n)+")",r=!1}),t+"])"}function Ld(e){let t=Object.getPrototypeOf(e)?.constructor?.name||"Object",r=[];for(let s of Object.keys(e))r.push(`${yt(s)}: ${yt(e[s])}`);let n=r.length?" "+r.join(", ")+" ":"";return`//js(${t==="Object"?"":t+" "}{${n}})`}function Ed(e){let t=Object.keys(e).map(r=>{let n=yt(e[r]);return isNaN(parseInt(r))?`${r}: ${n}`:n}).join(", ");return t?`${e.constructor.name}(${t})`:e.constructor.name}function Ad(e){return`[${e.toArray().map(yt).join(", ")}]`}function zd(e){return`//utfcodepoint(${String.fromCodePoint(e.value)})`}function Uu(e,t){if(e.bitSize===0)return t;for(let r=0;r<e.byteSize-1;r++)t+=e.byteAt(r).toString(),t+=", ";if(e.byteSize*8===e.bitSize)t+=e.byteAt(e.byteSize-1).toString();else{let r=e.bitSize%8;t+=e.byteAt(e.byteSize-1)>>8-r,t+=`:size(${r})`}return t}function Cd(e,t){return!J(N(t,e),new S(void 0))}function Cu(e,t){return Cd(t,e)}function H(e,t,r){return ta(t,r,e)}function Md(e,t){for(;;){let r=e,n=t;if(r.hasLength(0))return n;{let i=r.head[0],s=r.head[1];e=r.tail,t=H(n,i,s)}}}function It(e){return Md(e,Re())}function ra(e,t){for(;;){let r=e,n=t;if(r.hasLength(0))return n;{let i=r.head;e=r.tail,t=w(i,n)}}}function Bd(e,t){for(;;){let r=e,n=t;if(r.hasLength(0))return ra(n,l([]));{let i=r.head[0];e=r.tail,t=w(i,n)}}}function Dt(e){return Bd(li(e),l([]))}function qd(e,t){for(;;){let r=e,n=t;if(r.hasLength(0))return ra(n,l([]));{let i=r.head[1];e=r.tail,t=w(i,n)}}}function Ie(e){let t=li(e);return qd(t,l([]))}function Ri(e,t){return ea(t,e)}function rr(e,t,r){let n=N(e,t);if(n.isOk()){let i=n[0];return H(e,t,r(new j(i)))}else return H(e,t,r(new C))}function Nd(e,t,r){for(;;){let n=e,i=t,s=r;if(n.hasLength(0))return i;{let o=n.head[0],a=n.head[1];e=n.tail,t=s(i,o,a),r=s}}}function nr(e,t,r){return Nd(li(e),t,r)}function Id(e,t){let r=(n,i,s)=>H(n,i,e(i,s));return nr(t,Re(),r)}function Te(e,t){return Id(t,e)}function na(e,t){if(e instanceof ot||e instanceof WeakMap||e instanceof Map){let n={},i=e.get(t,n);return i===n?new k(new C):new k(new j(i))}let r=Number.isInteger(t);if(r&&t>=0&&t<8&&e instanceof ce){let n=0;for(let i of e){if(n===t)return new k(new j(i));n++}return new S("Indexable")}return r&&Array.isArray(e)||e&&typeof e=="object"||e&&Object.getPrototypeOf(e)===Object.prototype?t in e?new k(new j(e[t])):new k(new C):new S(r?"Indexable":"Dict")}function ia(e,t,r,n,i){if(!(e instanceof ce||Array.isArray(e))){let o=new Ut("List",er(e),i);return[i,ce.fromArray([o])]}let s=[];for(let o of e){let a=t(o),[u,c]=a;if(c instanceof We){let[f,p]=r(a,n.toString());return[i,p]}s.push(u),n++}return[ce.fromArray(s),i]}function sa(e){return typeof e=="number"?new k(e):new S(0)}function oa(e){return Number.isInteger(e)?new k(e):new S(0)}function la(e){return typeof e=="string"?new k(e):new S("")}var Ut=class extends m{constructor(t,r,n){super(),this.expected=t,this.found=r,this.path=n}},pt=class extends m{constructor(t){super(),this.function=t}};function ir(e,t){let r=t.function(e),n=r[0],i=r[1];return i.hasLength(0)?new k(n):new S(i)}function Ft(e){return new pt(t=>[e,l([])])}function Gi(e,t){return new pt(r=>{let n=e.function(r),i=n[0],s=n[1];return[t(i),s]})}function Pd(e,t,r){for(;;){let n=e,i=t,s=r;if(s.hasLength(0))return i;{let o=s.head,a=s.tail,u=o.function(n),c=u;if(u[1].hasLength(0))return c;e=n,t=i,r=a}}}function ua(e,t){return new pt(r=>{let n=e.function(r),i=n;return n[1].hasLength(0)?i:Pd(r,i,t)})}function Dd(e,t){return l([new Ut(e,er(t),l([]))])}function Mo(e,t,r){let n=r(e);return n.isOk()?[n[0],l([])]:[n[0],l([new Ut(t,er(e),l([]))])]}function Ud(e){return J(!0,e)?[!0,l([])]:J(!1,e)?[!1,l([])]:[!1,Dd("Bool",e)]}function Fd(e){return Mo(e,"Int",oa)}function Wd(e){return Mo(e,"Float",sa)}var Vi=new pt(Ud),fe=new pt(Fd),Ji=new pt(Wd);function Rd(e){return Mo(e,"String",la)}var jt=new pt(Rd);function ci(e){return new pt(t=>ia(t,e.function,(r,n)=>Hi(r,l([n])),0,l([])))}function Hi(e,t){let r=ua(jt,l([Gi(fe,B)])),n=W(t,s=>{let o=s,a=ir(o,r);return a.isOk()?a[0]:"<"+er(o)+">"}),i=W(e[1],s=>{let o=s;return new Ut(o.expected,o.found,pe(n,s.path))});return[e[0],i]}function Hd(e,t,r,n,i){for(;;){let s=e,o=t,a=r,u=n,c=i;if(s.hasLength(0)){let f=a(u);return Hi(f,Y(o))}else{let f=s.head,p=s.tail,_=na(u,f);if(_.isOk()&&_[0]instanceof j){let d=_[0][0];e=p,t=w(f,o),r=a,n=d,i=c}else{if(_.isOk()&&_[0]instanceof C)return c(u,w(f,o));{let d=_[0],$=[a(u)[0],l([new Ut(d,er(u),l([]))])];return Hi($,Y(o))}}}}}function Bo(e,t,r){return new pt(n=>{let i=Hd(e,l([]),t.function,n,(f,p)=>{let h=[t.function(f)[0],l([new Ut("Field","Nothing",l([]))])];return Hi(h,Y(p))}),s=i[0],o=i[1],a=r(s).function(n),u=a[0],c=a[1];return[u,pe(o,c)]})}function ee(e,t,r){return Bo(l([e]),t,r)}function ft(e,t,r){return e?t:r()}function qo(e,t,r){return e?t():r()}function Ve(e){return e}function aa(e){try{let t=JSON.parse(e);return new k(t)}catch(t){return new S(Vd(t,e))}}function Vd(e,t){return Jd(e)?new Xi:Kd(e,t)}function Jd(e){return/((unexpected (end|eof))|(end of data)|(unterminated string)|(json( parse error|\.parse)\: expected '(\:|\}|\])'))/i.test(e.message)}function Kd(e,t){let r=[Yd,Xd,Zd,Qd];for(let n of r){let i=n(e,t);if(i)return i}return new sr("",0)}function Yd(e){let r=/unexpected token '(.)', ".+" is not valid JSON/i.exec(e.message);if(!r)return null;let n=Yi(r[1]);return new sr(n,-1)}function Xd(e){let r=/unexpected token (.) in JSON at position (\d+)/i.exec(e.message);if(!r)return null;let n=Yi(r[1]),i=Number(r[2]);return new sr(n,i)}function Qd(e,t){let n=/(unexpected character|expected .*) at line (\d+) column (\d+)/i.exec(e.message);if(!n)return null;let i=Number(n[2]),s=Number(n[3]),o=e_(i,s,t),a=Yi(t[o]);return new sr(a,o)}function Zd(e){let r=/unexpected (identifier|token) "(.)"/i.exec(e.message);if(!r)return null;let n=Yi(r[2]);return new sr(n,0)}function Yi(e){return"0x"+e.charCodeAt(0).toString(16).toUpperCase()}function e_(e,t,r){if(e===1)return t-1;let n=1,i=0;return r.split("").find((s,o)=>(s===`
`&&(n+=1),n===e?(i=o+t,!0):!1)),i}var Xi=class extends m{},sr=class extends m{constructor(t){super(),this[0]=t}};var No=class extends m{constructor(t){super(),this[0]=t}};function r_(e,t){return Pt(aa(e),r=>{let n=ir(r,t);return hr(n,i=>new No(i))})}function ca(e,t){return r_(e,t)}function Po(e){return e}var Qi=class extends m{constructor(t){super(),this.dict=t}};function fa(){return new Qi(Re())}function Do(e,t){let r=e.dict,n=N(r,t);return Fu(n)}var i_=void 0;function da(e,t){return new Qi(H(e.dict,t,i_))}var o_=ot.new();function Zi(){return o_}var l_=fa();function pi(){return l_}var dt=globalThis?.document,es="http://www.w3.org/1999/xhtml",ts=1,rs=3,fi=11,_a=!!globalThis.HTMLElement?.prototype?.moveBefore;var U=l([]),ns=new C;var u_=new se,a_=new ie,c_=new te;function is(e,t){return e.name===t.name?c_:e.name<t.name?a_:u_}var lt=class extends m{constructor(t,r,n){super(),this.kind=t,this.name=r,this.value=n}},Qr=class extends m{constructor(t,r,n){super(),this.kind=t,this.name=r,this.value=n}},Ce=class extends m{constructor(t,r,n,i,s,o,a,u){super(),this.kind=t,this.name=r,this.handler=n,this.include=i,this.prevent_default=s,this.stop_propagation=o,this.immediate=a,this.limit=u}},Zr=class extends m{constructor(t){super(),this.kind=t}},di=class extends m{constructor(t,r){super(),this.kind=t,this.delay=r}},_i=class extends m{constructor(t,r){super(),this.kind=t,this.delay=r}};function ya(e,t){if(e instanceof Zr&&t instanceof Zr)return!0;if(e instanceof di&&t instanceof di&&e.delay===t.delay){let r=e.delay,n=t.delay;return!0}else if(e instanceof _i&&t instanceof _i&&e.delay===t.delay){let r=e.delay,n=t.delay;return!0}else return!1}function __(e,t){for(;;){let r=e,n=t;if(r.hasLength(0))return n;if(r.atLeastLength(2)&&r.head instanceof lt&&r.head.name==="class"&&r.tail.head instanceof lt&&r.tail.head.name==="class"){let i=r.head.kind,s=r.head.value,o=r.tail.head.value,a=r.tail.tail,u=s+" "+o,c=new lt(i,"class",u);e=w(c,a),t=n}else if(r.atLeastLength(2)&&r.head instanceof lt&&r.head.name==="style"&&r.tail.head instanceof lt&&r.tail.head.name==="style"){let i=r.head.kind,s=r.head.value,o=r.tail.head.value,a=r.tail.tail,u=s+";"+o,c=new lt(i,"style",u);e=w(c,a),t=n}else{let i=r.head;e=r.tail,t=w(i,n)}}}function va(e){if(e.hasLength(0))return e;if(e.hasLength(1))return e;{let r=Qt(e,(n,i)=>is(i,n));return __(r,U)}}var Ro=0;function ka(e,t){return new lt(Ro,e,t)}var Ho=1;function ja(e,t){return new Qr(Ho,e,t)}var Go=2;function Oa(e,t,r,n,i,s,o){return new Ce(Go,e,t,r,n,i,s,o)}var Vo=1;var Jo=2;function g(e,t){return ka(e,t)}function m_(e,t){return ja(e,t)}function Ko(e,t){return t?g(e,""):m_(e,Po(!1))}function b(e){return g("class",e)}function Sa(e){return Ko("hidden",e)}function _t(e){return g("id",e)}function La(e){return g("href",e)}function Ea(e){return Ko("disabled",e)}function ss(e){return g("for",e)}function Aa(e){return g("max",e)}function za(e){return g("min",e)}function Yo(e){return g("name",e)}function Xo(e){return g("placeholder",e)}function Ta(e){return Ko("selected",e)}function os(e){return g("step",e)}function Wt(e){return g("type",e)}function St(e){return g("value",e)}var $i=class extends m{constructor(t,r,n){super(),this.synchronous=t,this.before_paint=r,this.after_paint=n}};var Qo=new $i(l([]),l([]),l([]));function F(){return Qo}function mt(e){let t=n=>{let i=n.dispatch;return e(i)},r=Qo;return new $i(l([t]),r.before_paint,r.after_paint)}function Lt(e){return Z(e,Qo,(t,r)=>new $i(Z(r.synchronous,t.synchronous,Rr),Z(r.before_paint,t.before_paint,Rr),Z(r.after_paint,t.after_paint,Rr)))}function Qe(){return null}function en(e,t){let r=e?.get(t);return r!=null?new k(r):new S(void 0)}function xi(e,t,r){return e??=new Map,e.set(t,r),e}function Zo(e,t){return e?.delete(t),e}var us=class extends m{},as=class extends m{constructor(t,r){super(),this.key=t,this.parent=r}},el=class extends m{constructor(t,r){super(),this.index=t,this.parent=r}};function h_(e,t){for(;;){let r=e,n=t;if(n.hasLength(0))return!1;{let i=n.head,s=n.tail;if(si(r,i))return!0;e=r,t=s}}}function or(e,t,r){return r===""?new el(t,e):new as(r,e)}var tl=new us,rl=`
`,nl="	";function Ca(e,t){for(;;){let r=e,n=t;if(r instanceof us){if(n.hasLength(0))return"";{let i=n.tail;return Ye(i)}}else if(r instanceof as){let i=r.key;e=r.parent,t=w(nl,w(i,n))}else{let i=r.index;e=r.parent,t=w(rl,w(B(i),n))}}}function $_(e){return Ca(e,l([]))}function Ma(e,t){return t.hasLength(0)?!1:h_($_(e),t)}var il="\f";function sl(e,t){return Ca(e,l([il,t]))}var De=class extends m{constructor(t,r,n,i,s,o){super(),this.kind=t,this.key=r,this.mapper=n,this.children=i,this.keyed_children=s,this.children_count=o}},ut=class extends m{constructor(t,r,n,i,s,o,a,u,c,f){super(),this.kind=t,this.key=r,this.mapper=n,this.namespace=i,this.tag=s,this.attributes=o,this.children=a,this.keyed_children=u,this.self_closing=c,this.void=f}},Et=class extends m{constructor(t,r,n,i){super(),this.kind=t,this.key=r,this.mapper=n,this.content=i}},$t=class extends m{constructor(t,r,n,i,s,o,a){super(),this.kind=t,this.key=r,this.mapper=n,this.namespace=i,this.tag=s,this.attributes=o,this.inner_html=a}};function w_(e,t){return t===""?e==="area"||e==="base"||e==="br"||e==="col"||e==="embed"||e==="hr"||e==="img"||e==="input"||e==="link"||e==="meta"||e==="param"||e==="source"||e==="track"?!0:e==="wbr":!1}function Ze(e){return e instanceof De?1+e.children_count:1}var ol=0;function qa(e,t,r,n,i){return new De(ol,e,t,r,n,i)}var ll=1;function ul(e,t,r,n,i,s,o,a,u){return new ut(ll,e,t,r,n,va(i),s,o,a,u||w_(n,r))}var al=2;function cl(e,t,r){return new Et(al,e,t,r)}var Na=3;function Ia(e,t,r,n,i){for(;;){let s=e,o=t,a=r,u=n,c=i;if(o.hasLength(0))return[Y(u),c];if(o.atLeastLength(1)&&o.head instanceof De&&o.head.key===""){let f=o.head,p=o.tail,_=s+"::"+B(a),d=Ia(_,f.children,0,U,Qe()),h=d[0],y=d[1],$,O=f;$=new De(O.kind,O.key,O.mapper,h,y,O.children_count);let L=w($,u),A=a+1;e=s,t=p,r=A,n=L,i=c}else if(o.atLeastLength(1)&&o.head.key!==""){let f=o.head,p=o.tail,_=s+"::"+f.key,d=pl(_,f),h=w(d,u),y=xi(c,_,d),$=a+1;e=s,t=p,r=$,n=h,i=y}else{let f=o.head,p=o.tail,_=w(f,u),d=a+1;e=s,t=p,r=d,n=_,i=c}}}function pl(e,t){if(t instanceof ut){let r=t;return new ut(r.kind,e,r.mapper,r.namespace,r.tag,r.attributes,r.children,r.keyed_children,r.self_closing,r.void)}else if(t instanceof Et){let r=t;return new Et(r.kind,e,r.mapper,r.content)}else if(t instanceof $t){let r=t;return new $t(r.kind,e,r.mapper,r.namespace,r.tag,r.attributes,r.inner_html)}else{let r=t.children,n=Ia(e,r,0,U,Qe()),i=n[0],s=n[1],o=t;return new De(o.kind,e,o.mapper,i,s,o.children_count)}}var wr=class extends m{constructor(t,r,n,i){super(),this.index=t,this.removed=r,this.changes=n,this.children=i}},fl=class extends m{constructor(t,r){super(),this.kind=t,this.content=r}},dl=class extends m{constructor(t,r){super(),this.kind=t,this.inner_html=r}},_l=class extends m{constructor(t,r,n){super(),this.kind=t,this.added=r,this.removed=n}},ml=class extends m{constructor(t,r,n,i){super(),this.kind=t,this.key=r,this.before=n,this.count=i}},hl=class extends m{constructor(t,r,n){super(),this.kind=t,this.key=r,this.count=n}},$l=class extends m{constructor(t,r,n,i){super(),this.kind=t,this.from=r,this.count=n,this.with=i}},xl=class extends m{constructor(t,r,n){super(),this.kind=t,this.children=r,this.before=n}},gl=class extends m{constructor(t,r,n){super(),this.kind=t,this.from=r,this.count=n}};function wl(e,t,r,n){return new wr(e,t,r,n)}var bl=0;function Pa(e){return new fl(bl,e)}var yl=1;function Da(e){return new dl(yl,e)}var vl=2;function kl(e,t){return new _l(vl,e,t)}var cs=3;function Ua(e,t,r){return new ml(cs,e,t,r)}var jl=4;function Fa(e,t){return new hl(jl,e,t)}var ps=5;function Ol(e,t,r){return new $l(ps,e,t,r)}var fs=6;function Sl(e,t){return new xl(fs,e,t)}var ds=7;function Wa(e,t){return new gl(ds,e,t)}var $s=class extends m{constructor(t,r){super(),this.patch=t,this.events=r}},Ll=class extends m{constructor(t,r,n){super(),this.added=t,this.removed=r,this.events=n}};function y_(e,t,r,n){return r==="input"&&t===""?ms(e,n):r==="select"&&t===""?ms(e,n):r==="textarea"&&t===""?ms(e,n):!1}function Ha(e,t,r,n,i,s,o,a){for(;;){let u=e,c=t,f=r,p=n,_=i,d=s,h=o,y=a;if(_.hasLength(0)&&d.hasLength(0))return new Ll(h,y,p);if(_.atLeastLength(1)&&_.head instanceof Ce&&d.hasLength(0)){let $=_.head,O=_.head.name,v=_.tail,L=w($,y),A=_s(p,c,O);e=u,t=c,r=f,n=A,i=v,s=d,o=h,a=L}else if(_.atLeastLength(1)&&d.hasLength(0)){let $=_.head,O=_.tail,v=w($,y);e=u,t=c,r=f,n=p,i=O,s=d,o=h,a=v}else if(_.hasLength(0)&&d.atLeastLength(1)&&d.head instanceof Ce){let $=d.head,O=d.head.name,v=d.head.handler,L=d.tail,A=w($,h),x=wi(p,f,c,O,v);e=u,t=c,r=f,n=x,i=_,s=L,o=A,a=y}else if(_.hasLength(0)&&d.atLeastLength(1)){let $=d.head,O=d.tail,v=w($,h);e=u,t=c,r=f,n=p,i=_,s=O,o=v,a=y}else{let $=_.head,O=_.tail,v=d.head,L=d.tail,A=is($,v);if($ instanceof lt&&A instanceof te&&v instanceof lt){let x,M=v.name;M==="value"||M==="checked"||M==="selected"?x=u||$.value!==v.value:x=$.value!==v.value;let E=x,P;E?P=w(v,h):P=h;let G=P;e=u,t=c,r=f,n=p,i=O,s=L,o=G,a=y}else if($ instanceof Qr&&A instanceof te&&v instanceof Qr){let x,M=v.name;M==="scrollLeft"||M==="scrollRight"?x=!0:M==="value"?x=u||!J($.value,v.value):M==="checked"?x=u||!J($.value,v.value):M==="selected"?x=u||!J($.value,v.value):x=!J($.value,v.value);let E=x,P;E?P=w(v,h):P=h;let G=P;e=u,t=c,r=f,n=p,i=O,s=L,o=G,a=y}else if($ instanceof Ce&&A instanceof te&&v instanceof Ce){let x=v.name,M=v.handler,E=$.prevent_default!==v.prevent_default||$.stop_propagation!==v.stop_propagation||$.immediate!==v.immediate||!ya($.limit,v.limit),P;E?P=w(v,h):P=h;let G=P,Q=wi(p,f,c,x,M);e=u,t=c,r=f,n=Q,i=O,s=L,o=G,a=y}else if($ instanceof Ce&&A instanceof te){let x=$.name,M=w(v,h),E=w($,y),P=_s(p,c,x);e=u,t=c,r=f,n=P,i=O,s=L,o=M,a=E}else if(A instanceof te&&v instanceof Ce){let x=v.name,M=v.handler,E=w(v,h),P=w($,y),G=wi(p,f,c,x,M);e=u,t=c,r=f,n=G,i=O,s=L,o=E,a=P}else if(A instanceof te){let x=w(v,h),M=w($,y);e=u,t=c,r=f,n=p,i=O,s=L,o=x,a=M}else if(A instanceof se&&v instanceof Ce){let x=v.name,M=v.handler,E=w(v,h),P=wi(p,f,c,x,M);e=u,t=c,r=f,n=P,i=_,s=L,o=E,a=y}else if(A instanceof se){let x=w(v,h);e=u,t=c,r=f,n=p,i=_,s=L,o=x,a=y}else if($ instanceof Ce&&A instanceof ie){let x=$.name,M=w($,y),E=_s(p,c,x);e=u,t=c,r=f,n=E,i=O,s=d,o=h,a=M}else{let x=w($,y);e=u,t=c,r=f,n=p,i=O,s=d,o=h,a=x}}}}function El(e,t,r,n,i,s,o,a,u,c,f,p,_,d){for(;;){let h=e,y=t,$=r,O=n,v=i,L=s,A=o,x=a,M=u,E=c,P=f,G=p,Q=_,ge=d;if(h.hasLength(0)&&$.hasLength(0))return new $s(new wr(M,A,P,G),ge);if(h.atLeastLength(1)&&$.hasLength(0)){let R=h.head,_e=h.tail,D;R.key===""||!Do(v,R.key)?D=A+Ze(R):D=A;let me=D,ve=bi(ge,E,x,R);e=_e,t=y,r=$,n=O,i=v,s=L,o=me,a=x,u=M,c=E,f=P,p=G,_=Q,d=ve}else if(h.hasLength(0)&&$.atLeastLength(1)){let R=Va(ge,Q,E,x,$),_e=Sl($,x-L),D=w(_e,P);return new $s(new wr(M,A,D,G),R)}else if(h.atLeastLength(1)&&$.atLeastLength(1)&&h.head.key!==$.head.key){let R=h.head,_e=h.tail,D=$.head,Be=$.tail,me=en(y,D.key),ve=en(O,R.key),Je=Do(v,R.key);if(ve.isOk()&&me.isOk()&&Je)e=_e,t=y,r=$,n=O,i=v,s=L-Ze(R),o=A,a=x,u=M,c=E,f=P,p=G,_=Q,d=ge;else if(ve.isOk()&&me.isOk()){let le=me[0],re=Ze(D),we=x-L,ke=Ua(D.key,we,re),qe=w(ke,P),at=da(v,D.key),gt=L+re;e=w(le,h),t=y,r=$,n=O,i=at,s=gt,o=A,a=x,u=M,c=E,f=qe,p=G,_=Q,d=ge}else if(!ve.isOk()&&me.isOk()){let le=Ze(R),re=L-le,we=bi(ge,E,x,R),ke=Fa(R.key,le),qe=w(ke,P);e=_e,t=y,r=$,n=O,i=v,s=re,o=A,a=x,u=M,c=E,f=qe,p=G,_=Q,d=we}else if(ve.isOk()&&!me.isOk()){let le=x-L,re=Ze(D),we=hs(ge,Q,E,x,D),ke=Sl(l([D]),le),qe=w(ke,P);e=h,t=y,r=Be,n=O,i=v,s=L+re,o=A,a=x+re,u=M,c=E,f=qe,p=G,_=Q,d=we}else{let le=Ze(R),re=Ze(D),we=Ol(x-L,le,D),ke,at=bi(ge,E,x,R);ke=hs(at,Q,E,x,D);let gt=ke;e=_e,t=y,r=Be,n=O,i=v,s=L-le+re,o=A,a=x+re,u=M,c=E,f=w(we,P),p=G,_=Q,d=gt}}else if(h.atLeastLength(1)&&h.head instanceof De&&$.atLeastLength(1)&&$.head instanceof De){let R=h.head,_e=h.tail,D=$.head,Be=$.tail,me=x+1,ve=R.children_count,Je=D.children_count,le=lr(Q,D.mapper),re=El(R.children,R.keyed_children,D.children,D.keyed_children,pi(),L,0,me,-1,E,U,G,le,ge),we;if(re.patch.removed>0){let at=me+Je-L,gt=Wa(at,re.patch.removed);we=pe(re.patch.changes,w(gt,P))}else we=pe(re.patch.changes,P);let qe=we;e=_e,t=y,r=Be,n=O,i=v,s=L+Je-ve,o=A,a=me+Je,u=M,c=E,f=qe,p=re.patch.children,_=Q,d=re.events}else if(h.atLeastLength(1)&&h.head instanceof ut&&$.atLeastLength(1)&&$.head instanceof ut&&h.head.namespace===$.head.namespace&&h.head.tag===$.head.tag){let R=h.head,_e=h.tail,D=$.head,Be=$.tail,me=lr(Q,D.mapper),ve=or(E,x,D.key),Je=y_(ge,D.namespace,D.tag,ve),le=Ha(Je,ve,me,ge,R.attributes,D.attributes,U,U),re=le.added,we=le.removed,ke=le.events,qe;re.hasLength(0)&&we.hasLength(0)?qe=U:qe=l([kl(re,we)]);let at=qe,gt=El(R.children,R.keyed_children,D.children,D.keyed_children,pi(),0,0,0,x,ve,at,U,me,ke),Mr,Jt=gt.patch;Jt instanceof wr&&Jt.removed===0&&Jt.changes.hasLength(0)&&Jt.children.hasLength(0)?Mr=G:Mr=w(gt.patch,G);let to=Mr;e=_e,t=y,r=Be,n=O,i=v,s=L,o=A,a=x+1,u=M,c=E,f=P,p=to,_=Q,d=gt.events}else if(h.atLeastLength(1)&&h.head instanceof Et&&$.atLeastLength(1)&&$.head instanceof Et&&h.head.content===$.head.content){let R=h.head,_e=h.tail,D=$.head,Be=$.tail;e=_e,t=y,r=Be,n=O,i=v,s=L,o=A,a=x+1,u=M,c=E,f=P,p=G,_=Q,d=ge}else if(h.atLeastLength(1)&&h.head instanceof Et&&$.atLeastLength(1)&&$.head instanceof Et){let R=h.tail,_e=$.head,D=$.tail,Be=wl(x,0,l([Pa(_e.content)]),U);e=R,t=y,r=D,n=O,i=v,s=L,o=A,a=x+1,u=M,c=E,f=P,p=w(Be,G),_=Q,d=ge}else if(h.atLeastLength(1)&&h.head instanceof $t&&$.atLeastLength(1)&&$.head instanceof $t){let R=h.head,_e=h.tail,D=$.head,Be=$.tail,me=lr(Q,D.mapper),ve=or(E,x,D.key),Je=Ha(!1,ve,me,ge,R.attributes,D.attributes,U,U),le=Je.added,re=Je.removed,we=Je.events,ke;le.hasLength(0)&&re.hasLength(0)?ke=U:ke=l([kl(le,re)]);let qe=ke,at;R.inner_html===D.inner_html?at=qe:at=w(Da(D.inner_html),qe);let Mr=at,Jt;Mr.hasLength(0)?Jt=G:Jt=w(wl(x,0,Mr,l([])),G);let to=Jt;e=_e,t=y,r=Be,n=O,i=v,s=L,o=A,a=x+1,u=M,c=E,f=P,p=to,_=Q,d=we}else{let R=h.head,_e=h.tail,D=$.head,Be=$.tail,me=Ze(R),ve=Ze(D),Je=Ol(x-L,me,D),le,we=bi(ge,E,x,R);le=hs(we,Q,E,x,D);let ke=le;e=_e,t=y,r=Be,n=O,i=v,s=L-me+ve,o=A,a=x+ve,u=M,c=E,f=w(Je,P),p=G,_=Q,d=ke}}}function Al(e,t,r){return El(l([t]),Qe(),l([r]),Qe(),pi(),0,0,0,0,tl,U,U,Ve,Ga(e))}var gs=class{offset=0;#e=null;#s=()=>{};#u=!1;constructor(t,r,{useServerEvents:n=!1}={}){this.#e=t,this.#s=r,this.#u=n}mount(t){xs(this.#e,this.#l(t))}#r=[];push(t){let r=this.offset;r&&(Rt(t.changes,n=>{switch(n.kind){case fs:case cs:n.before=(n.before|0)+r;break;case ds:case ps:n.from=(n.from|0)+r;break}}),Rt(t.children,n=>{n.index=(n.index|0)+r})),this.#r.push({node:this.#e,patch:t}),this.#o()}#o(){let t=this;for(;t.#r.length;){let{node:r,patch:n}=t.#r.pop();Rt(n.changes,i=>{switch(i.kind){case fs:t.#a(r,i.children,i.before);break;case cs:t.#f(r,i.key,i.before,i.count);break;case jl:t.#d(r,i.key,i.count);break;case ds:t.#t(r,i.from,i.count);break;case ps:t.#c(r,i.from,i.count,i.with);break;case bl:t.#i(r,i.content);break;case yl:t.#_(r,i.inner_html);break;case vl:t.#p(r,i.added,i.removed);break}}),n.removed&&t.#t(r,r.childNodes.length-n.removed,n.removed),Rt(n.children,i=>{t.#r.push({node:vi(r,i.index),patch:i})})}}#a(t,r,n){let i=Ya();Rt(r,s=>{let o=this.#l(s);Tl(t,o),xs(i,o)}),zl(t,i,vi(t,n))}#f(t,r,n,i){let s=Xa(t,r),o=vi(t,n);for(let a=0;a<i&&s!==null;++a){let u=s.nextSibling;_a?t.moveBefore(s,o):zl(t,s,o),s=u}}#d(t,r,n){this.#n(t,Xa(t,r),n)}#t(t,r,n){this.#n(t,vi(t,r),n)}#n(t,r,n){for(;n-- >0&&r!==null;){let i=r.nextSibling,s=r[be].key;s&&t[be].keyedChildren.delete(s);for(let[o,{timeout:a}]of r[be].debouncers)clearTimeout(a);t.removeChild(r),r=i}}#c(t,r,n,i){this.#t(t,r,n);let s=this.#l(i);Tl(t,s),zl(t,s,vi(t,r))}#i(t,r){t.data=r??""}#_(t,r){t.innerHTML=r??""}#p(t,r,n){Rt(n,i=>{let s=i.name;t[be].handlers.has(s)?(t.removeEventListener(s,Qa),t[be].handlers.delete(s),t[be].throttles.has(s)&&t[be].throttles.delete(s),t[be].debouncers.has(s)&&(clearTimeout(t[be].debouncers.get(s).timeout),t[be].debouncers.delete(s))):(t.removeAttribute(s),ec[s]?.removed?.(t,s))}),Rt(r,i=>{this.#h(t,i)})}#l(t){switch(t.kind){case ll:{let r=Ja(t);return this.#m(r,t),this.#a(r,t.children,0),r}case al:{let r=Ka(t.content);return Ht(r,t.key),r}case ol:{let r=Ya(),n=Ka();return Ht(n,t.key),xs(r,n),Rt(t.children,i=>{xs(r,this.#l(i))}),r}case Na:{let r=Ja(t);return this.#m(r,t),this.#_(r,t.inner_html),r}}}#m(t,{attributes:r}){Rt(r,n=>this.#h(t,n))}#h(t,r){let n=t[be];switch(r.kind){case Ro:{let i=r.name,s=r.value??"";s!==t.getAttribute(i)&&t.setAttribute(i,s),ec[i]?.added?.(t,s);break}case Ho:t[r.name]=r.value;break;case Go:{n.handlers.has(r.name)||t.addEventListener(r.name,Qa,{passive:!r.prevent_default});let i=r.prevent_default,s=r.stop_propagation,o=r.immediate,a=Array.isArray(r.include)?r.include:[];if(r.limit?.kind===Jo){let u=n.throttles.get(r.name)??{last:0,delay:r.limit.delay};n.throttles.set(r.name,u)}if(r.limit?.kind===Vo){let u=n.debouncers.get(r.name)??{timeout:null,delay:r.limit.delay};n.debouncers.set(r.name,u)}n.handlers.set(r.name,u=>{i&&u.preventDefault(),s&&u.stopPropagation();let c=u.type,f="",p=u.currentTarget;for(;p!==this.#e;){let d=p[be].key,h=p.parentNode;if(d)f=`${nl}${d}${f}`;else{let y=h.childNodes,$=[].indexOf.call(y,p);h===this.#e&&($-=this.offset),f=`${rl}${$}${f}`}p=h}f=f.slice(1);let _=this.#u?v_(u,a):u;if(n.throttles.has(c)){let d=n.throttles.get(c),h=Date.now(),y=d.last||0;h>y+d.delay?(d.last=h,this.#s(_,f,c,o)):u.preventDefault()}else if(n.debouncers.has(c)){let d=n.debouncers.get(c);clearTimeout(d.timeout),d.timeout=setTimeout(()=>{this.#s(_,f,c,o)},d.delay)}else this.#s(_,f,c,o)});break}}}},Rt=(e,t)=>{if(Array.isArray(e))for(let r=0;r<e.length;r++)t(e[r]);else if(e)for(e;e.tail;e=e.tail)t(e.head)},xs=(e,t)=>e.appendChild(t),zl=(e,t,r)=>e.insertBefore(t,r??null),Ja=({key:e,tag:t,namespace:r})=>{let n=dt.createElementNS(r||es,t);return Ht(n,e),n},Ka=e=>dt.createTextNode(e??""),Ya=()=>dt.createDocumentFragment(),vi=(e,t)=>e.childNodes[t|0],be=Symbol("lustre"),Ht=(e,t="")=>{switch(e.nodeType){case ts:case fi:e[be]={key:t,keyedChildren:new Map,handlers:new Map,throttles:new Map,debouncers:new Map};break;case rs:e[be]={key:t,debouncers:new Map};break}},Tl=(e,t)=>{if(t.nodeType===fi){for(t=t.firstChild;t;t=t.nextSibling)Tl(e,t);return}let r=t[be].key;r&&e[be].keyedChildren.set(r,new WeakRef(t))},Xa=(e,t)=>e[be].keyedChildren.get(t).deref(),Qa=e=>{let r=e.currentTarget[be].handlers.get(e.type);e.type==="submit"&&(e.detail??={},e.detail.formData=[...new FormData(e.target).entries()]),r(e)},v_=(e,t=[])=>{let r={};(e.type==="input"||e.type==="change")&&t.push("target.value"),e.type==="submit"&&t.push("detail.formData");for(let n of t){let i=n.split(".");for(let s=0,o=e,a=r;s<i.length;s++){if(s===i.length-1){a[i[s]]=o[i[s]];break}a=a[i[s]]??={},o=o[i[s]]}}return r},Za=e=>({added(t){t[e]=!0},removed(t){t[e]=!1}}),k_=e=>({added(t,r){t[e]=r}}),ec={checked:Za("checked"),selected:Za("selected"),value:k_("value"),autofocus:{added(e){queueMicrotask(()=>e.focus?.())}},autoplay:{added(e){try{e.play?.()}catch(t){console.error(t)}}}};var nc=e=>{let t=ic(e);if(t===null||t.children instanceof ct){let r=tc();return Ht(r),e.appendChild(r),sc()}else{if(t.children instanceof We&&t.children.tail instanceof ct)return t.children.head;{let r=tc();return Ht(r),e.insertBefore(r,e.firstChild),Cl(t.children)}}},tc=()=>dt.createTextNode(""),ic=e=>{switch(e.nodeType){case ts:{let t=e.getAttribute("data-lustre-key");Ht(e,t),t&&e.removeAttribute("data-lustre-key");let r=e.localName,n=e.namespaceURI,i=!n||n===es;i&&j_.includes(r)&&O_(r,e);let s=S_(e),o=rc(e),a=i?de(r,s,o):tn(n,r,s,o);return t?pl(t,a):a}case rs:return Ht(e),br(e.data);case fi:return Ht(e),e.childNodes.length>0?Cl(rc(e)):null;default:return null}},j_=["input","select","textarea"],O_=(e,t)=>{let r=t.value,n=t.checked;e==="input"&&t.type==="checkbox"&&!n||e==="input"&&t.type==="radio"&&!n||t.type!=="checkbox"&&t.type!=="radio"&&!r||queueMicrotask(()=>{t.value=r,t.checked=n,t.dispatchEvent(new Event("input",{bubbles:!0})),t.dispatchEvent(new Event("change",{bubbles:!0})),dt.activeElement!==t&&t.dispatchEvent(new Event("blur",{bubbles:!0}))})},rc=e=>{let t=U,r=e.lastChild;for(;r;){let n=ic(r),i=r.previousSibling;n?t=new We(n,t):e.removeChild(r),r=i}return t},S_=e=>{let t=e.attributes.length,r=U;for(;t-- >0;)r=new We(L_(e.attributes[t]),r);return r},L_=e=>{let t=e.localName,r=e.value;return g(t,r)};var ji=()=>!!dt;var Ml=(e,t)=>e===t;var ki=class{constructor(t,[r,n],i,s){this.root=t,this.#e=r,this.#s=i,this.#u=s,this.#a=new gs(this.root,(o,a,u)=>{let[c,f]=ws(this.#o,a,u,o);this.#o=c,f.isOk()&&this.dispatch(f[0],!1)}),this.#r=nc(this.root),this.#o=Bl(),this.#i=!0,this.#p(n)}root=null;set offset(t){this.#a.offset=t}dispatch(t,r=!1){if(this.#i||=r,this.#f)this.#d.push(t);else{let[n,i]=this.#u(this.#e,t);this.#e=n,this.#p(i)}}emit(t,r){(this.root.host??this.root).dispatchEvent(new CustomEvent(t,{detail:r,bubbles:!0,composed:!0}))}#e;#s;#u;#r;#o;#a;#f=!1;#d=[];#t=U;#n=U;#c=null;#i=!1;#_={dispatch:(t,r)=>this.dispatch(t,r),emit:(t,r)=>this.emit(t,r),select:()=>{},root:()=>this.root};#p(t){for(this.#f=!0;;){for(let r=t.synchronous;r.tail;r=r.tail)r.head(this.#_);if(this.#t=lc(this.#t,t.before_paint),this.#n=lc(this.#n,t.after_paint),!this.#d.length)break;[this.#e,t]=this.#u(this.#e,this.#d.shift())}this.#f=!1,this.#i?(cancelAnimationFrame(this.#c),this.#l()):this.#c||(this.#c=requestAnimationFrame(()=>{this.#l()}))}#l(){this.#i=!1,this.#c=null;let t=this.#s(this.#e),{patch:r,events:n}=Al(this.#o,this.#r,t);if(this.#o=n,this.#r=t,this.#a.push(r),this.#t instanceof We){let i=oc(this.#t);this.#t=U,queueMicrotask(()=>{this.#i=!0,this.#p(i)})}if(this.#n instanceof We){let i=oc(this.#n);this.#n=U,requestAnimationFrame(()=>{this.#i=!0,this.#p(i)})}}};function oc(e){return{synchronous:e,after_paint:U,before_paint:U}}function lc(e,t){return e instanceof ct?t:t instanceof ct?e:pe(e,t)}var At=class extends m{constructor(t,r,n){super(),this.handlers=t,this.dispatched_paths=r,this.next_dispatched_paths=n}};function Bl(){return new At(Qe(),U,U)}function Ga(e){return new At(e.handlers,e.next_dispatched_paths,U)}function pc(e,t,r){return Zo(e,sl(t,r))}function _s(e,t,r){let n=pc(e.handlers,t,r),i=e;return new At(n,i.dispatched_paths,i.next_dispatched_paths)}function uc(e,t,r){return Z(r,e,(n,i)=>{if(i instanceof Ce){let s=i.name;return pc(n,t,s)}else return n})}function ws(e,t,r,n){let i=w(t,e.next_dispatched_paths),s,o=e;s=new At(o.handlers,o.dispatched_paths,i);let a=s,u=en(a.handlers,t+il+r);if(u.isOk()){let c=u[0];return[a,ir(n,c)]}else return[a,new S(l([]))]}function ms(e,t){return Ma(t,e.dispatched_paths)}function fc(e,t,r,n,i){return xi(e,sl(r,n),Gi(i,t))}function wi(e,t,r,n,i){let s=fc(e.handlers,t,r,n,i),o=e;return new At(s,o.dispatched_paths,o.next_dispatched_paths)}function ac(e,t,r,n){return Z(n,e,(i,s)=>{if(s instanceof Ce){let o=s.name,a=s.handler;return fc(i,t,r,o,a)}else return i})}function lr(e,t){let r=Ml(e,Ve),n=Ml(t,Ve);return n?e:r&&!n?t:i=>e(t(i))}function cc(e,t,r,n){for(;;){let i=e,s=t,o=r,a=n;if(a.hasLength(0))return i;{let u=a.head,c=a.tail;e=dc(i,s,o,u),t=s,r=o+Ze(u),n=c}}}function dc(e,t,r,n){if(n instanceof ut){let i=n.attributes,s=n.children,o=or(t,r,n.key),u=uc(e,o,i);return cc(u,o,0,s)}else if(n instanceof De){let i=n.children;return cc(e,t,r+1,i)}else if(n instanceof $t){let i=n.attributes,s=or(t,r,n.key);return uc(e,s,i)}else return e}function bi(e,t,r,n){let i=dc(e.handlers,t,r,n),s=e;return new At(i,s.dispatched_paths,s.next_dispatched_paths)}function ql(e,t,r,n,i){for(;;){let s=e,o=t,a=r,u=n,c=i;if(c.hasLength(0))return s;{let f=c.head,p=c.tail;e=_c(s,o,a,u,f),t=o,r=a,n=u+Ze(f),i=p}}}function _c(e,t,r,n,i){if(i instanceof ut){let s=i.attributes,o=i.children,a=or(r,n,i.key),u=lr(t,i.mapper),f=ac(e,u,a,s);return ql(f,u,a,0,o)}else if(i instanceof De){let s=i.children,o=lr(t,i.mapper),a=n+1;return ql(e,o,r,a,s)}else if(i instanceof $t){let s=i.attributes,o=or(r,n,i.key),a=lr(t,i.mapper);return ac(e,a,o,s)}else return e}function hs(e,t,r,n,i){let s=_c(e.handlers,t,r,n,i),o=e;return new At(s,o.dispatched_paths,o.next_dispatched_paths)}function Va(e,t,r,n,i){let s=ql(e.handlers,t,r,n,i),o=e;return new At(s,o.dispatched_paths,o.next_dispatched_paths)}function de(e,t,r){return ul("",Ve,"",e,t,r,Qe(),!1,!1)}function tn(e,t,r,n){return ul("",Ve,e,t,r,n,Qe(),!1,!1)}function br(e){return cl("",Ve,e)}function sc(){return cl("",Ve,"")}function E_(e,t){for(;;){let r=e,n=t;if(r.hasLength(0))return n;if(r.atLeastLength(1)&&r.head instanceof De){let i=r.head.children_count;e=r.tail,t=n+i}else e=r.tail,t=n+1}}function Cl(e){return qa("",Ve,e,Qe(),E_(e,0))}function q(e){return br(e)}function Nl(e,t){return de("aside",e,t)}function bs(e,t){return de("h2",e,t)}function yr(e,t){return de("h3",e,t)}function ys(e,t){return de("section",e,t)}function T(e,t){return de("div",e,t)}function Oi(e,t){return de("li",e,t)}function Il(e,t){return de("p",e,t)}function Pl(e,t){return de("ul",e,t)}function hc(e,t){return de("a",e,t)}function $c(e){return de("br",e,U)}function K(e,t){return de("span",e,t)}function Ue(e,t){return de("button",e,t)}function Gt(e){return de("input",e,U)}function vs(e,t){return de("label",e,t)}function Dl(e,t){return de("option",e,l([br(t)]))}function xc(e,t){return de("select",e,t)}var vr=class extends m{constructor(t){super(),this.message=t}},rn=class extends m{constructor(t,r){super(),this.name=t,this.data=r}};var kr=class extends m{};var Ul=class extends m{constructor(t,r,n,i,s,o,a,u){super(),this.open_shadow_root=t,this.adopt_styles=r,this.attributes=n,this.properties=i,this.is_form_associated=s,this.on_form_autofill=o,this.on_form_reset=a,this.on_form_restore=u}};function wc(e){let t=new Ul(!1,!0,Zi(),Zi(),!1,ns,ns,ns);return Z(e,t,(r,n)=>n.apply(r))}var Fl=class e{static start({init:t,update:r,view:n},i,s){if(!ji())return new S(new nn);let o=i instanceof HTMLElement?i:dt.querySelector(i);return o?new k(new e(o,t(s),r,n)):new S(new ks(i))}#e;constructor(t,[r,n],i,s){this.#e=new ki(t,[r,n],s,i)}send(t){switch(t.constructor){case vr:{this.dispatch(t.message,!1);break}case rn:{this.emit(t.name,t.data);break}case kr:break}}dispatch(t,r){this.#e.dispatch(t,r)}emit(t,r){this.#e.emit(t,r)}},bc=Fl.start;var Wl=class extends m{constructor(t,r,n,i){super(),this.init=t,this.update=r,this.view=n,this.config=i}};var ks=class extends m{constructor(t){super(),this.selector=t}},nn=class extends m{};function yc(e,t,r){return new Wl(e,t,r,wc(U))}function vc(e,t,r){return ft(!ji(),new S(new nn),()=>bc(e,t,r))}var ar=class extends m{constructor(t,r,n,i,s){super(),this.name=t,this.stations=r,this.system=n,this.region=i,this.contraband=s}},Me=class extends m{constructor(t,r){super(),this.name=t,this.holds=r}},et=class extends m{constructor(t,r,n){super(),this.name=t,this.kind=r,this.capacity=n}},tt=class extends m{},Os=class extends m{};function Ss(e){return e instanceof tt?"Generic":"Infrastructure"}function kc(){return l([new tt,new Os])}function Ls(e){let t=(()=>{let n=Ae(e);return Vr(n)})();return t==="generic"?new k(new tt):t==="infrastructure"?new k(new Os):new S(void 0)}var B_=l([3713,3721,17796]),q_=l([12478,3727]),N_=l([]),I_=l([]),P_=l([]),D_=l([]),jc=l([["JITA",new ar("Jita",l([60003760]),30000142,10000002,B_)],["AMARR",new ar("Amarr",l([60008494]),30002187,10000043,q_)],["RENS",new ar("Rens",l([60004588]),30002510,10000030,N_)],["HEK",new ar("Hek",l([60005686]),30002053,10000042,I_)],["DODI",new ar("Dodi",l([60003760]),30000142,10000032,P_)],["THERA",new ar("Thera",l([60015148,60015149,60015150,60015151]),31000005,11000031,D_)]]);var U_=l([2870,2871,2872,2875,2876,2393,2396,3779,2401,2390,2397,2392,3683,2389,2399,2395,2398,9828,2400,3645,2329,3828,9836,9832,44,3693,15317,3725,3689,2327,9842,2463,2317,2321,3695,9830,3697,9838,2312,3691,2319,9840,3775,2328,2358,2345,2344,2367,17392,2348,9834,2366,2361,17898,2360,2354,2352,9846,9848,2351,2349,2346,12836,17136,28974,81143,81144,56201,56202,56203,56204,56205,56206,56207,56208,81920,16633,16634,16635,16636,16637,16638,16639,16640,16641,16642,16643,16644,16646,16647,16648,16649,16650,16651,16652,16653,35832,35833,35834,40340,47512,47513,47514,47515,47516,35825,35826,35827,81826,35835,35836,82492,82493,82494,82495,82496,82497,82498,82499,82500,82579,82580,82581,82582,82583,82584,82585,82586,82587,82588,82589,82590,82591,82592,82609,81615,81619,81621,81623,32458,81080,33475,33700,33702,56701,81951,33474,33520,33522,37846,37847,37848,47303,3962,16272,16273,16274,16275,17887,17888,17889,2129,2130,2131,2132,2133,2134,2135,2136,2137,2138,2139,2140,2141,2142,2143,2144,2145,2146,2147,2148,2149,2150,2151,2152,2153,2154,2155,2156,2157,2158,2159,2160,2254,2524,2525,2533,2534,2549,2550,2551,2574,2576,2577,2578,2581,2582,2585,2586,47035,47036,47138,47139,47140,47141,47142,47143,47144,47145,47146,47147,47148,47149,47150,47151]);function Oc(e,t){return t instanceof tt?!0:Fr(U_,e)}var on=class extends m{constructor(t,r,n,i,s,o,a,u,c,f,p){super(),this.duration=t,this.issued=r,this.location_id=n,this.min_volume=i,this.order_id=s,this.price=o,this.range=a,this.system_id=u,this.type_id=c,this.volume_remain=f,this.volume_total=p}},Rl=class extends m{constructor(t,r,n){super(),this.type_id=t,this.volume=r,this.name=n}};function Sc(e,t){return e.location_id===t.location_id&&e.price===t.price&&e.type_id===t.type_id&&e.system_id===t.system_id?new k((()=>{let n=e;return new on(n.duration,n.issued,n.location_id,n.min_volume,n.order_id,n.price,n.range,n.system_id,n.type_id,e.volume_remain+t.volume_remain,e.volume_total+t.volume_total)})()):new S(void 0)}function Hl(e,t){let r=e;return new on(r.duration,r.issued,r.location_id,r.min_volume,r.order_id,r.price,r.range,r.system_id,r.type_id,e.volume_remain-t,r.volume_total)}function F_(){return ee("duration",fe,e=>ee("is_buy_order",Vi,t=>qo(!t,()=>{throw z("panic","config/esi",100,"","found a sell order, should be a buy order",{})},()=>ee("issued",jt,r=>ee("location_id",fe,n=>ee("min_volume",fe,i=>ee("order_id",fe,s=>ee("price",Ji,o=>ee("range",jt,a=>ee("system_id",fe,u=>ee("type_id",fe,c=>ee("volume_remain",fe,f=>ee("volume_total",fe,p=>Ft(new on(e,r,n,i,s,o,a,u,c,f,p)))))))))))))))}function Lc(){return ci(F_())}function W_(){return ee("duration",fe,e=>ee("is_buy_order",Vi,t=>qo(t,()=>{throw z("panic","config/esi",131,"","found a buy order, should be a sell order",{})},()=>ee("issued",jt,r=>ee("location_id",fe,n=>ee("min_volume",fe,i=>ee("order_id",fe,s=>ee("price",Ji,o=>ee("range",jt,a=>ee("system_id",fe,u=>ee("type_id",fe,c=>ee("volume_remain",fe,f=>ee("volume_total",fe,p=>Ft(new on(e,r,n,i,s,o,a,u,c,f,p)))))))))))))))}function Ec(){return ci(W_())}function Ac(){return ee("type_id",fe,e=>ee("volume",Ji,t=>ee("name",jt,r=>Ft(new Rl(e,t,r)))))}var zc="https://esi.evetech.net/latest",R_="/markets/{region_id}/orders/?datasource=tranquility&order_type={order_kind}&page={page}";function Gl(e,t,r){let n;t?n="buy":n="sell";let i=n,s=l([zc,R_]),o=Ye(s),a=Gr(o,"{region_id}",B(e.region)),u=Gr(a,"{order_kind}",i);return Gr(u,"{page}",B(r))}var H_="/universe/types/{type_id}?datasource=tranquility";function Tc(e){return zc+Gr(H_,"{type_id}",B(e))}function Mc(e,t){for(;;){let r=e,n=t,i=Bt(n,1e3);if(i>0){let s=i,o=","+(()=>{let a=B(Mt(n,1e3));return ho(a,3,"0")})();e=w(o,r),t=s}else{let s=w(B(n),r);return Y(s)}}}function jr(e){let t=Xt(e),r=Mc(l([]),t),n=Y(r);return Ye(n)}function Bc(e){let t=Mc(l([]),e),r;if(t.hasLength(0))throw z("panic","util/numbers",42,"millions_to_unit_string","shouldnt be able to find an empty value",{});if(t.hasLength(1))r=[t.head,"M"];else{let o=t.tail;r=[(()=>{let u=Y(o);return Ye(u)})(),"B"]}let n=r,i=n[0],s=n[1];return i+" "+s}function G_(e){let t=W(e,r=>B(r)+",");return Ye(t)}function V_(e){let r=ri(e,1),n=mr(r,","),i=W(n,Ee);return oi(i)}function qc(e){return nr(e,"",(t,r,n)=>t+B(r)+":"+G_(n)+";")}function Nc(e){return ft(_o(e),new k(It(l([]))),()=>{let t,n=ri(e,1);t=mr(n,";");let s=W(t,a=>{let u=mr(a,":");if(!u.hasLength(2))throw z("let_assert","util/numbers",79,"","Pattern match failed, no pattern matched the value.",{value:u});let c=u.head,f=u.tail.head;return ze(Ee(c),p=>ft(_o(f),new k([p,l([])]),()=>He(V_(f),_=>[p,_])))}),o=oi(s);return He(o,It)})}function Si(e){let t=Bt(e,1e3);return t>10?B(t)+"k":B(e)}var Vl=class extends m{constructor(t,r,n){super(),this.id=t,this.name=r,this.m3=n}},Ei=class extends m{constructor(t,r,n,i,s,o,a,u,c){super(),this.source=t,this.destination=r,this.item=n,this.amount=i,this.total_volume=s,this.unit_buy_price=o,this.unit_sell_price=a,this.total_price=u,this.profit_per_volume=c}},ln=class extends m{constructor(t,r,n,i,s,o,a){super(),this.source=t,this.destination=r,this.item=n,this.amount=i,this.unit_buy_price=s,this.unit_sell_price=o,this.unit_profit=a}},Jl=class extends m{constructor(t,r,n){super(),this.purchases=t,this.total_price=r,this.total_profit=n}},Kl=class extends m{constructor(t,r,n,i,s){super(),this.item_name=t,this.amount=r,this.unit_price=n,this.total_price=i,this.total_profit=s}};function J_(e,t,r){let n=Ne(e.total_volume,e.amount),i,s=Ne(t,e.unit_sell_price);i=Xt(s);let o=i,a,u=Ne(r,n);a=Xt(u);let f=Eu(o,a),p=e.amount-f,_=_r(f,0);if(_ instanceof te)return new S(void 0);if(_ instanceof se)return new k([(()=>{let d=e;return new Ei(d.source,d.destination,d.item,f,n*f,d.unit_buy_price,d.unit_sell_price,e.unit_sell_price*f,d.profit_per_volume)})(),(()=>{let d=e;return new Ei(d.source,d.destination,d.item,p,n*p,d.unit_buy_price,d.unit_sell_price,e.unit_sell_price*p,d.profit_per_volume)})()]);throw z("panic","arbitrage",186,"split_trade_to_fit","negative capacity ? negative collateral ?",{})}function K_(e,t,r){let n=e.capacity,i=Z(r,[l([]),l([]),t,n],(u,c)=>{let f=u[0],p=u[1],_=u[2],d=u[3],h=c.total_volume<=d,y=c.total_price<=_,$=Oc(c.item.id,e.kind);if($){if(h&&y&&$)return[w(c,f),p,_-c.total_price,d-c.total_volume];{let O=J_(c,_,d);if(O.isOk()){let v=O[0][0],L=O[0][1];return[w(v,f),w(L,p),_-v.total_price,d-v.total_volume]}else return[f,w(c,p),_,d]}}else return[f,w(c,p),_,d]}),s=i[0],o=i[1],a=i[2];return[s,o,a]}function Y_(e){return new Kl(e.item.name,e.amount,e.unit_sell_price,e.unit_sell_price*(()=>{let t=e.amount;return t})(),(e.unit_buy_price-e.unit_sell_price)*(()=>{let t=e.amount;return t})())}function Pc(e,t){if(e.item===t.type_id){let n=new Ei(e.source,e.destination,new Vl(t.type_id,t.name,t.volume),e.amount,(()=>{let i=e.amount;return i})()*t.volume,e.unit_buy_price,e.unit_sell_price,e.unit_sell_price*(()=>{let i=e.amount;return i})(),Ne(e.unit_profit,t.volume));return new k(n)}else return new S(void 0)}function Ic(e){let t=Z(e,Re(),(r,n)=>{let i,s=N(r,n.type_id);if(!s.isOk())i=l([n]);else{let a=s[0];i=w(n,a)}let o=i;return H(r,n.type_id,o)});return Te(t,(r,n)=>{let i=Qt(n,(s,o)=>Nr(s.price,o.price));return Z(i,l([]),(s,o)=>ft(Ur(s),l([o]),()=>{if(!s.atLeastLength(1))throw z("let_assert","arbitrage",269,"","Pattern match failed, no pattern matched the value.",{value:s});let a=s.head,u=s.tail,c=Sc(a,o);if(c.isOk()){let f=c[0];return w(f,u)}else return w(o,w(a,u))}))})}function Es(e,t,r){return ft(Ur(e)||Ur(t),r,()=>{if(!e.atLeastLength(1))throw z("let_assert","arbitrage",328,"","Pattern match failed, no pattern matched the value.",{value:e});let n=e.head,i=e.tail;if(!t.atLeastLength(1))throw z("let_assert","arbitrage",329,"","Pattern match failed, no pattern matched the value.",{value:t});let s=t.head,o=t.tail,a=_r(n.volume_remain,s.volume_remain);if(a instanceof te){let u=new ln(n.location_id,s.location_id,n.type_id,n.volume_remain,s.price,n.price,s.price-n.price);return Es(i,o,w(u,r))}else if(a instanceof se){let u=new ln(n.location_id,s.location_id,n.type_id,s.volume_remain,s.price,n.price,s.price-n.price),c=Hl(n,s.volume_remain);return Es(w(c,i),o,w(u,r))}else{let u=new ln(n.location_id,s.location_id,n.type_id,n.volume_remain,s.price,n.price,s.price-n.price),c=Hl(s,n.volume_remain);return Es(i,w(c,o),w(u,r))}})}function Dc(e,t,r){let n=Ic(e),i=Ic(t),s=Dt(n),o=Dt(i),a=Wr(s,p=>Fr(o,p)),u=W(a,p=>{let _=N(n,p);if(!_.isOk())throw z("let_assert","arbitrage",291,"","Pattern match failed, no pattern matched the value.",{value:_});let d=_[0],h=N(i,p);if(!h.isOk())throw z("let_assert","arbitrage",292,"","Pattern match failed, no pattern matched the value.",{value:h});let y=h[0],$=Qt(d,(v,L)=>Nr(v.price,L.price)),O=Qt(y,(v,L)=>Nr(L.price,v.price));return Es($,O,l([]))}),c=bt(u),f=W(c,p=>{let _=p.unit_buy_price*r,d=p;return new ln(d.source,d.destination,d.item,d.amount,_,d.unit_sell_price,_-p.unit_sell_price)});return Wr(f,p=>p.unit_profit>0)}function X_(e){let t=Z(e,[0,0],(i,s)=>{let o=i[0],a=i[1];return[o+s.total_price,a+s.total_profit]}),r=t[0],n=t[1];return new Jl(e,r,n)}function Q_(e){let t=Z(e,Re(),(o,a)=>rr(o,a.item,u=>{let c=Nt(u,l([]));return Rr(c,a)})),r=Ie(t),n=Qt(r,(o,a)=>_r(nt(a),nt(o))),i=uo(n),s=W(i,o=>W(o,Y_));return W(s,X_)}function Uc(e,t,r){let n=Qt(e,(c,f)=>Nr(f.profit_per_volume,c.profit_per_volume)),i,s=t*1e6;i=s;let o=i,u=Z(r,[l([]),n,o],(c,f)=>{let p=c[0],_=c[1],d=c[2],h=K_(f,d,_),y=h[0],$=h[1],O=h[2];return[pe(y,p),$,O]})[0];return Q_(u)}function Fc(e){return e.purchases}function Yl(e){return e.total_price}function Wc(e){return e.total_profit}function Xl(e){return e.item_name+"	"+B(e.amount)+"	"+Ke(e.unit_price)+"	"+Ke(e.total_price)}function Rc(e){let t=W(e.purchases,n=>Xl(n)+`
`),r=Ye(t);return ri(r,1)}var Z_=7.5,em=11;function un(e){let t=e*em,r=1-Ne(t,100);return Z_*r}function Gc(){let e=Date.now(),t=e%1e3,r=t*1e6;return[(e-t)/1e3,r]}var Ai=class extends m{constructor(t,r){super(),this.seconds=t,this.nanoseconds=r}};function im(e){let t=1e9,r=Mt(e.nanoseconds,t),n=e.nanoseconds-r,i=e.seconds+Bt(n,t);return r>=0?new Ai(i,r):new Ai(i-1,t+r)}function Ql(){let e=Gc(),t=e[0],r=e[1];return im(new Ai(t,r))}var V=class extends m{constructor(t,r,n,i,s,o,a){super(),this.scheme=t,this.userinfo=r,this.host=n,this.port=i,this.path=s,this.query=o,this.fragment=a}};function um(e){return 48>=e&&e<=57||65>=e&&e<=90||97>=e&&e<=122||e===58||e===46}function Tt(e,t){return new k((()=>{let r=t;return new V(r.scheme,r.userinfo,r.host,r.port,r.path,r.query,new j(e))})())}function am(e,t,r,n){for(;;){let i=e,s=t,o=r,a=n;if(s.startsWith("#")&&a===0){let u=s.slice(1);return Tt(u,o)}else if(s.startsWith("#")){let u=s.slice(1),c=Le(i,0,a),f,p=o;return f=new V(p.scheme,p.userinfo,p.host,p.port,p.path,new j(c),p.fragment),Tt(u,f)}else{if(s==="")return new k((()=>{let u=o;return new V(u.scheme,u.userinfo,u.host,u.port,u.path,new j(i),u.fragment)})());{let c=xr(s)[1];e=i,t=c,r=o,n=a+1}}}}function cr(e,t){return am(e,e,t,0)}function cm(e,t,r,n){for(;;){let i=e,s=t,o=r,a=n;if(s.startsWith("?")){let u=s.slice(1),c=Le(i,0,a),f,p=o;return f=new V(p.scheme,p.userinfo,p.host,p.port,c,p.query,p.fragment),cr(u,f)}else if(s.startsWith("#")){let u=s.slice(1),c=Le(i,0,a),f,p=o;return f=new V(p.scheme,p.userinfo,p.host,p.port,c,p.query,p.fragment),Tt(u,f)}else{if(s==="")return new k((()=>{let u=o;return new V(u.scheme,u.userinfo,u.host,u.port,i,u.query,u.fragment)})());{let c=xr(s)[1];e=i,t=c,r=o,n=a+1}}}}function cn(e,t){return cm(e,e,t,0)}function zt(e,t,r){for(;;){let n=e,i=t,s=r;if(n.startsWith("0"))e=n.slice(1),t=i,r=s*10;else if(n.startsWith("1"))e=n.slice(1),t=i,r=s*10+1;else if(n.startsWith("2"))e=n.slice(1),t=i,r=s*10+2;else if(n.startsWith("3"))e=n.slice(1),t=i,r=s*10+3;else if(n.startsWith("4"))e=n.slice(1),t=i,r=s*10+4;else if(n.startsWith("5"))e=n.slice(1),t=i,r=s*10+5;else if(n.startsWith("6"))e=n.slice(1),t=i,r=s*10+6;else if(n.startsWith("7"))e=n.slice(1),t=i,r=s*10+7;else if(n.startsWith("8"))e=n.slice(1),t=i,r=s*10+8;else if(n.startsWith("9"))e=n.slice(1),t=i,r=s*10+9;else if(n.startsWith("?")){let o=n.slice(1),a,u=i;return a=new V(u.scheme,u.userinfo,u.host,new j(s),u.path,u.query,u.fragment),cr(o,a)}else if(n.startsWith("#")){let o=n.slice(1),a,u=i;return a=new V(u.scheme,u.userinfo,u.host,new j(s),u.path,u.query,u.fragment),Tt(o,a)}else if(n.startsWith("/")){let o,a=i;return o=new V(a.scheme,a.userinfo,a.host,new j(s),a.path,a.query,a.fragment),cn(n,o)}else return n===""?new k((()=>{let o=i;return new V(o.scheme,o.userinfo,o.host,new j(s),o.path,o.query,o.fragment)})()):new S(void 0)}}function zs(e,t){if(e.startsWith(":0")){let r=e.slice(2);return zt(r,t,0)}else if(e.startsWith(":1")){let r=e.slice(2);return zt(r,t,1)}else if(e.startsWith(":2")){let r=e.slice(2);return zt(r,t,2)}else if(e.startsWith(":3")){let r=e.slice(2);return zt(r,t,3)}else if(e.startsWith(":4")){let r=e.slice(2);return zt(r,t,4)}else if(e.startsWith(":5")){let r=e.slice(2);return zt(r,t,5)}else if(e.startsWith(":6")){let r=e.slice(2);return zt(r,t,6)}else if(e.startsWith(":7")){let r=e.slice(2);return zt(r,t,7)}else if(e.startsWith(":8")){let r=e.slice(2);return zt(r,t,8)}else if(e.startsWith(":9")){let r=e.slice(2);return zt(r,t,9)}else{if(e.startsWith(":"))return new S(void 0);if(e.startsWith("?")){let r=e.slice(1);return cr(r,t)}else if(e.startsWith("#")){let r=e.slice(1);return Tt(r,t)}else return e.startsWith("/")?cn(e,t):e===""?new k(t):new S(void 0)}}function Vc(e,t,r,n){for(;;){let i=e,s=t,o=r,a=n;if(s==="")return new k((()=>{let u=o;return new V(u.scheme,u.userinfo,new j(i),u.port,u.path,u.query,u.fragment)})());if(s.startsWith(":")){let u=Le(i,0,a),c,f=o;return c=new V(f.scheme,f.userinfo,new j(u),f.port,f.path,f.query,f.fragment),zs(s,c)}else if(s.startsWith("/")){let u=Le(i,0,a),c,f=o;return c=new V(f.scheme,f.userinfo,new j(u),f.port,f.path,f.query,f.fragment),cn(s,c)}else if(s.startsWith("?")){let u=s.slice(1),c=Le(i,0,a),f,p=o;return f=new V(p.scheme,p.userinfo,new j(c),p.port,p.path,p.query,p.fragment),cr(u,f)}else if(s.startsWith("#")){let u=s.slice(1),c=Le(i,0,a),f,p=o;return f=new V(p.scheme,p.userinfo,new j(c),p.port,p.path,p.query,p.fragment),Tt(u,f)}else{let c=xr(s)[1];e=i,t=c,r=o,n=a+1}}}function pm(e,t,r,n){for(;;){let i=e,s=t,o=r,a=n;if(s==="")return new k((()=>{let u=o;return new V(u.scheme,u.userinfo,new j(s),u.port,u.path,u.query,u.fragment)})());if(s.startsWith("]")&&a===0){let u=s.slice(1);return zs(u,o)}else if(s.startsWith("]")){let u=s.slice(1),c=Le(i,0,a+1),f,p=o;return f=new V(p.scheme,p.userinfo,new j(c),p.port,p.path,p.query,p.fragment),zs(u,f)}else{if(s.startsWith("/")&&a===0)return cn(s,o);if(s.startsWith("/")){let u=Le(i,0,a),c,f=o;return c=new V(f.scheme,f.userinfo,new j(u),f.port,f.path,f.query,f.fragment),cn(s,c)}else if(s.startsWith("?")&&a===0){let u=s.slice(1);return cr(u,o)}else if(s.startsWith("?")){let u=s.slice(1),c=Le(i,0,a),f,p=o;return f=new V(p.scheme,p.userinfo,new j(c),p.port,p.path,p.query,p.fragment),cr(u,f)}else if(s.startsWith("#")&&a===0){let u=s.slice(1);return Tt(u,o)}else if(s.startsWith("#")){let u=s.slice(1),c=Le(i,0,a),f,p=o;return f=new V(p.scheme,p.userinfo,new j(c),p.port,p.path,p.query,p.fragment),Tt(u,f)}else{let u=xr(s),c=u[0],f=u[1];if(um(c))e=i,t=f,r=o,n=a+1;else return Vc(i,i,o,0)}}}}function fm(e,t){return pm(e,e,t,0)}function dm(e,t){return Vc(e,e,t,0)}function an(e,t){if(e.startsWith("["))return fm(e,t);if(e.startsWith(":")){let r,n=t;return r=new V(n.scheme,n.userinfo,new j(""),n.port,n.path,n.query,n.fragment),zs(e,r)}else return e===""?new k((()=>{let r=t;return new V(r.scheme,r.userinfo,new j(""),r.port,r.path,r.query,r.fragment)})()):dm(e,t)}function _m(e,t,r,n){for(;;){let i=e,s=t,o=r,a=n;if(s.startsWith("@")&&a===0){let u=s.slice(1);return an(u,o)}else if(s.startsWith("@")){let u=s.slice(1),c=Le(i,0,a),f,p=o;return f=new V(p.scheme,new j(c),p.host,p.port,p.path,p.query,p.fragment),an(u,f)}else{if(s==="")return an(i,o);if(s.startsWith("/"))return an(i,o);if(s.startsWith("?"))return an(i,o);if(s.startsWith("#"))return an(i,o);{let c=xr(s)[1];e=i,t=c,r=o,n=a+1}}}}function mm(e,t){return _m(e,e,t,0)}function Zl(e,t){if(e==="//")return new k((()=>{let r=t;return new V(r.scheme,r.userinfo,new j(""),r.port,r.path,r.query,r.fragment)})());if(e.startsWith("//")){let r=e.slice(2);return mm(r,t)}else return cn(e,t)}function hm(e,t,r,n){for(;;){let i=e,s=t,o=r,a=n;if(s.startsWith("/")&&a===0)return Zl(s,o);if(s.startsWith("/")){let u=Le(i,0,a),c,f=o;return c=new V(new j(Ae(u)),f.userinfo,f.host,f.port,f.path,f.query,f.fragment),Zl(s,c)}else if(s.startsWith("?")&&a===0){let u=s.slice(1);return cr(u,o)}else if(s.startsWith("?")){let u=s.slice(1),c=Le(i,0,a),f,p=o;return f=new V(new j(Ae(c)),p.userinfo,p.host,p.port,p.path,p.query,p.fragment),cr(u,f)}else if(s.startsWith("#")&&a===0){let u=s.slice(1);return Tt(u,o)}else if(s.startsWith("#")){let u=s.slice(1),c=Le(i,0,a),f,p=o;return f=new V(new j(Ae(c)),p.userinfo,p.host,p.port,p.path,p.query,p.fragment),Tt(u,f)}else{if(s.startsWith(":")&&a===0)return new S(void 0);if(s.startsWith(":")){let u=s.slice(1),c=Le(i,0,a),f,p=o;return f=new V(new j(Ae(c)),p.userinfo,p.host,p.port,p.path,p.query,p.fragment),Zl(u,f)}else{if(s==="")return new k((()=>{let u=o;return new V(u.scheme,u.userinfo,u.host,u.port,i,u.query,u.fragment)})());{let c=xr(s)[1];e=i,t=c,r=o,n=a+1}}}}}function Jc(e){let t,r=e.fragment;if(r instanceof j){let x=r[0];t=l(["#",x])}else t=l([]);let n=t,i,s=e.query;if(s instanceof j){let x=s[0];i=w("?",w(x,n))}else i=n;let o=i,a=w(e.path,o),u,c=e.host,f=si(e.path,"/");if(c instanceof j&&!f&&c[0]!==""){let x=c[0];u=w("/",a)}else u=a;let p=u,_,d=e.host,h=e.port;if(d instanceof j&&h instanceof j){let x=h[0];_=w(":",w(B(x),p))}else _=p;let y=_,$,O=e.scheme,v=e.userinfo,L=e.host;if(O instanceof j&&v instanceof j&&L instanceof j){let x=O[0],M=v[0],E=L[0];$=w(x,w("://",w(M,w("@",w(E,y)))))}else if(O instanceof j&&v instanceof C&&L instanceof j){let x=O[0],M=L[0];$=w(x,w("://",w(M,y)))}else if(O instanceof j&&v instanceof j&&L instanceof C){let x=O[0];$=w(x,w(":",y))}else if(O instanceof j&&v instanceof C&&L instanceof C){let x=O[0];$=w(x,w(":",y))}else if(O instanceof C&&v instanceof C&&L instanceof j){let x=L[0];$=w("//",w(x,y))}else $=y;return Ye($)}var $m=new V(new C,new C,new C,new C,"",new C,new C);function eu(e){return hm(e,e,$m,0)}var zi=class extends m{},Ts=class extends m{},tu=class extends m{},ru=class extends m{},nu=class extends m{},iu=class extends m{},su=class extends m{},ou=class extends m{},lu=class extends m{};var Cs=class extends m{},Ti=class extends m{};function Yc(e){return e instanceof su?"CONNECT":e instanceof nu?"DELETE":e instanceof zi?"GET":e instanceof tu?"HEAD":e instanceof ou?"OPTIONS":e instanceof lu?"PATCH":e instanceof Ts?"POST":e instanceof ru?"PUT":e instanceof iu?"TRACE":e[0]}function Xc(e){return e instanceof Cs?"http":"https"}function Qc(e){let t=Ae(e);return t==="http"?new k(new Cs):t==="https"?new k(new Ti):new S(void 0)}var au=class extends m{constructor(t,r,n,i,s,o,a,u){super(),this.method=t,this.headers=r,this.body=n,this.scheme=i,this.host=s,this.port=o,this.path=a,this.query=u}};function ep(e){return new V(new j(Xc(e.scheme)),new C,new j(e.host),e.port,e.path,e.query,new C)}function tp(e){return Pt((()=>{let t=e.scheme,r=Nt(t,"");return Qc(r)})(),t=>Pt((()=>{let r=e.host;return qi(r,void 0)})(),r=>{let n=new au(new zi,l([]),"",t,r,e.port,e.path,e.query);return new k(n)}))}var Or=class extends m{constructor(t,r,n){super(),this.status=t,this.headers=r,this.body=n}};function rp(e,t){return Ii(e.headers,Ae(t))}var pn=class e{constructor(t){this.promise=t}static wrap(t){return t instanceof Promise?new e(t):t}static unwrap(t){return t instanceof e?t.promise:t}};function fn(e){return Promise.resolve(pn.wrap(e))}function Ms(e,t){return e.then(r=>t(pn.unwrap(r)))}function Ci(e,t){return e.then(r=>pn.wrap(t(pn.unwrap(r))))}function ip(e,t){return Ci(e,n=>(t(n),n))}function Bs(e,t){return Ms(e,n=>{if(n.isOk()){let i=n[0];return t(i)}else{let i=n[0];return fn(new S(i))}})}async function sp(e){try{return new k(await fetch(e))}catch(t){return new S(new mn(t.toString()))}}function op(e){return new Or(e.status,ce.fromArray([...e.headers]),e)}function ym(e){let t=Jc(ep(e)),r=Yc(e.method).toUpperCase(),n={headers:vm(e.headers),method:r};return[t,n]}function lp(e){let[t,r]=ym(e);return r.method!=="GET"&&r.method!=="HEAD"&&(r.body=e.body),new globalThis.Request(t,r)}function vm(e){let t=new globalThis.Headers;for(let[r,n]of e)t.append(r.toLowerCase(),n);return t}async function pu(e){let t;try{t=await e.body.text()}catch{return new S(new hn)}return new k(e.withFields({body:t}))}var mn=class extends m{constructor(t){super(),this[0]=t}},hn=class extends m{};function up(e){let r=lp(e),n=sp(r);return Bs(n,i=>fn(new k(op(i))))}var fu=e=>{if(!globalThis.location)return new S(void 0);let t=new URL(e,globalThis.location.href),r=jm(t);return new k(r)},jm=e=>{let t=r=>r?new j(r):new C;return new V(t(e.protocol?.slice(0,-1)),new C,t(e.hostname),t(e.port&&Number(e.port)),e.pathname,t(e.search?.slice(1)),t(e.hash?.slice(1)))};var qs=class extends m{},Ns=class extends m{constructor(t){super(),this[0]=t}},$n=class extends m{constructor(t){super(),this[0]=t}},du=class extends m{constructor(t){super(),this[0]=t}},_u=class extends m{},Is=class extends m{constructor(t){super(),this[0]=t}},mu=class extends m{constructor(t){super(),this.run=t}};function Om(e){return new mu(t=>e(ze(t,r=>{let n=r.status;if(n>=200&&n<300){let i=n;return new k(r)}else if(n>=400&&n<600){let i=n;return new S(new $n(r))}else return new S(new Is(r))})))}function Sm(e){return Om(t=>e(ze(t,r=>{let n=rp(r,"content-type");return n.isOk()&&n[0]==="application/json"?new k(r):n.isOk()&&n[0].startsWith("application/json;")?new k(r):new S(new Is(r))})))}function Lm(e,t){return mt(r=>{let n=up(e),i=Bs(n,pu),s=Ci(i,a=>hr(a,u=>u instanceof mn?new _u:u instanceof hn?new qs:new qs)),o=Ci(s,t.run);ip(o,r)})}function Em(e,t){return Lm(e,t)}function ap(e,t){return mt(r=>{let n=new S(e),i=t.run(n);return r(i)})}function Am(e,t){let r=e.body,n=ca(r,t);return hr(n,i=>new du(i))}function Ps(e,t){return Sm(r=>{let i=Pt(r,s=>Am(s,e));return t(i)})}function zm(e){let t;return e.startsWith("./")?t=fu(e):e.startsWith("/")?t=fu(e):t=eu(e),wo(t,new Ns(e))}function Ds(e,t){let r=zm(e);if(r.isOk()){let n=r[0],i=tp(n),s=He(i,a=>Em(a,t)),o=hr(s,a=>ap(new Ns(e),t));return Wu(o)}else{let n=r[0];return ap(n,t)}}function Mi(){try{return globalThis.Storage&&globalThis.localStorage instanceof globalThis.Storage?new k(globalThis.localStorage):new S(null)}catch{return new S(null)}}function hu(e,t){return Tm(e.getItem(t))}function $u(e,t,r){try{return e.setItem(t,r),new k(null)}catch{return new S(null)}}function Tm(e){return e!==null?new k(e):new S(null)}function Us(e,t){let r=new RegExp(t.replace(/\*/g,".*")),n=[];for(let i=0;i<e.length;i++){let s=e.key(i);r.test(s)&&n.push(s)}n.forEach(i=>e.removeItem(i))}var I=class extends m{constructor(t,r,n,i,s,o,a,u,c,f,p,_,d){super(),this.storage=t,this.ships=r,this.current_ship=n,this.count_ship_index=i,this.count_hold_index=s,this.systems=o,this.source=a,this.destination=u,this.accounting_level=c,this.language=f,this.sidebar_expanded=p,this.collateral=_,this.trades=d}},Sr=class extends m{constructor(t){super(),this.raw_trade=t}},xn=class extends m{constructor(t){super(),this.trade=t}},gn=class extends m{constructor(t){super(),this.multibuy=t}},ye=class extends m{constructor(t,r){super(),this.ship=t,this.is_expanded=r}},Vt=class extends m{},Ct=class extends m{},pr=class extends m{constructor(t){super(),this[0]=t}},xt=class extends m{constructor(t,r,n,i,s){super(),this.location=t,this.buy_orders=r,this.buy_orders_status=n,this.sell_orders=i,this.sell_orders_status=s}},wn=class extends m{constructor(t){super(),this.new_source=t}},bn=class extends m{constructor(t){super(),this.new_destination=t}},Lr=class extends m{constructor(t){super(),this.source=t}},Er=class extends m{constructor(t){super(),this.destination=t}},yn=class extends m{constructor(t,r,n){super(),this[0]=t,this.location=r,this.page=n}},vn=class extends m{constructor(t,r,n){super(),this[0]=t,this.location=r,this.page=n}},kn=class extends m{constructor(t){super(),this[0]=t}},jn=class extends m{},On=class extends m{constructor(t){super(),this.multibuy=t}},Sn=class extends m{},Ln=class extends m{},Ar=class extends m{constructor(t){super(),this.value=t}},En=class extends m{constructor(t){super(),this.level=t}},An=class extends m{},zn=class extends m{constructor(t){super(),this.deleted_ship=t}},zr=class extends m{constructor(t){super(),this.ship_id=t}},Tn=class extends m{constructor(t){super(),this.id=t}},Cn=class extends m{constructor(t,r){super(),this.hold_id=t,this.ship_id=r}},Mn=class extends m{constructor(t,r){super(),this.hold_id=t,this.ship_id=r}},Bn=class extends m{constructor(t,r,n){super(),this.kind=t,this.hold_id=r,this.ship_id=n}},qn=class extends m{constructor(t){super(),this.ship_id=t}},Nn=class extends m{constructor(t,r){super(),this.hold_id=t,this.ship_id=r}},In=class extends m{constructor(t){super(),this.ship_id=t}},Pn=class extends m{constructor(t){super(),this.ship_id=t}},Dn=class extends m{constructor(t){super(),this.storage=t}},Un=class extends m{},Fn=class extends m{constructor(t,r){super(),this.storage_key=t,this.value=r}},Wn=class extends m{constructor(t){super(),this.storage_key=t}},Rn=class extends m{constructor(t,r){super(),this.name=t,this.id=r}},Hn=class extends m{constructor(t,r,n){super(),this.name=t,this.ship_id=r,this.hold_id=n}},Gn=class extends m{constructor(t,r,n){super(),this.capacity=t,this.ship_id=r,this.hold_id=n}},Vn=class extends m{constructor(t,r,n){super(),this.kind=t,this.ship_id=r,this.hold_id=n}},Jn=class extends m{constructor(t){super(),this.collateral=t}},Kn=class extends m{constructor(t){super(),this.accounting_level=t}},Yn=class extends m{constructor(t){super(),this.hold_indices=t}},Fs=class extends m{constructor(t){super(),this.selected_ship=t}};function fp(e,t){let r,n=Ee(e);return r=qt(n),t(r)}async function dp(e){try{return new k(await globalThis.navigator.clipboard.writeText(e))}catch(t){return new S(t.toString())}}function _p(e){return mt(t=>{Ms(dp(e),r=>fn(void 0))})}function xu(e,t,r){let n=Ps(Ec(),s=>new vn(s,t,r)),i=Gl(e,!1,r);return Ds(i,n)}function gu(e,t,r){let n=Ps(Lc(),s=>new yn(s,t,r)),i=Gl(e,!0,r);return Ds(i,n)}function mp(e){let t=Ps(Ac(),n=>new kn(n)),r=Tc(e);return Ds(r,t)}function $p(e,t){let r=Rc(t),n=_p(r);return Ge("Multibuy copied to clipboard"),[e,n]}function xp(e){return ft((()=>{let t=e.source;return no(t)})()||(()=>{let t=e.destination;return no(t)})(),[e,F()],()=>{let t=e.source;if(!(t instanceof j))throw z("let_assert","mvu/update/multibuys",36,"","Pattern match failed, no pattern matched the value.",{value:t});let r=t[0],n=e.destination;if(!(n instanceof j))throw z("let_assert","mvu/update/multibuys",37,"","Pattern match failed, no pattern matched the value.",{value:n});let i=n[0],s=N(e.systems,r);if(!s.isOk())throw z("let_assert","mvu/update/multibuys",38,"","Pattern match failed, no pattern matched the value.",{value:s});let o=s[0],a=N(e.systems,i);if(!a.isOk())throw z("let_assert","mvu/update/multibuys",39,"","Pattern match failed, no pattern matched the value.",{value:a});let u=a[0],c=Dc(o.sell_orders,u.buy_orders,(()=>{let L=e.accounting_level;return un(L)})()),f,p=e;f=new I(p.storage,p.ships,p.current_ship,p.count_ship_index,p.count_hold_index,p.systems,p.source,p.destination,p.accounting_level,p.language,p.sidebar_expanded,p.collateral,W(c,L=>new Sr(L)));let _=f,d,y=W(c,L=>L.item),$=Tu(y),O=W($,mp);return d=Lt(O),[_,d]})}function gp(e,t){if(t.isOk()){let r=t[0],n,i=e.trades;n=W(i,_=>{if(_ instanceof Sr){let d=_.raw_trade;if(d.item===r.type_id){let y=Pc(d,r),$=He(y,O=>new xn(O));return Zt($,(()=>{let O=d;return new Sr(O)})())}else{let y=d;return new Sr(y)}}else return _});let s=n,o;if(zu(s,_=>_ instanceof xn)){let _=e.current_ship;if(!(_ instanceof j))throw z("let_assert","mvu/update/multibuys",95,"esi_returned_type_metadata","Pattern match failed, no pattern matched the value.",{value:_});let d=_[0],h=e.collateral;if(!(h instanceof j))throw z("let_assert","mvu/update/multibuys",96,"esi_returned_type_metadata","Pattern match failed, no pattern matched the value.",{value:h});let y=h[0],$=W(s,A=>{if(!(A instanceof xn))throw z("let_assert","mvu/update/multibuys",99,"","Pattern match failed, no pattern matched the value.",{value:A});return A.trade}),O=N(e.ships,d);if(!O.isOk())throw z("let_assert","mvu/update/multibuys",102,"esi_returned_type_metadata","Pattern match failed, no pattern matched the value.",{value:O});let v=O[0],L=Uc($,y,(()=>{let A=v.ship.holds;return Ie(A)})());o=W(L,A=>new gn(A))}else o=s;let u=o,c,f=e;return c=new I(f.storage,f.ships,f.current_ship,f.count_ship_index,f.count_hold_index,f.systems,f.source,f.destination,f.accounting_level,f.language,f.sidebar_expanded,f.collateral,u),[c,F()]}else{let r=t[0];return tr(Jr(r)),[e,F()]}}function wp(){return mt(e=>{let t,r=Mi();if(!r.isOk())t=new Un;else{let i=r[0];t=new Dn(i)}return e(t)})}function Ws(e){return"ships/"+B(e)}function bp(e,t){return mt(r=>Us(e,Ws(t)+"*"))}function Tr(e,t){return Ws(e)+"/holds/"+B(t)}function yp(e,t,r){return mt(n=>Us(e,Tr(t,r)+"*"))}function fr(e,t,r){return mt(n=>{if(!$u(e,t,r).isOk())return n(new Fn(t,r))})}function wu(e,t,r){return fr(e,Ws(t)+"/name",r)}function Rs(e,t,r,n){return fr(e,Tr(t,r)+"/name",n)}function Hs(e,t,r,n){return fr(e,Tr(t,r)+"/capacity",Ke(n))}function Gs(e,t,r,n){return fr(e,Tr(t,r)+"/kind",Ss(n))}function vp(e,t){let r,n=Ni(t,B);return r=Nt(n,""),fr(e,"collateral",r)}function kp(e,t){return fr(e,"accounting_level",B(t))}function Bi(e,t){return fr(e,"hold_indices",qc(t))}function bu(e,t){let r,i=Ni(t,B);return r=Nt(i,""),fr(e,"selected_ship",r)}function dr(e,t,r,n){return mt(i=>{let s=ze(hu(e,t),o=>r(o));if(s.isOk()){let o=s[0];return i(n(o))}else return i(new Wn(t))})}function jp(e,t){return dr(e,Ws(t)+"/name",r=>new k(r),r=>new Rn(r,t))}function Op(e,t,r){return dr(e,Tr(t,r)+"/name",n=>new k(n),n=>new Hn(n,t,r))}function Sp(e,t,r){return dr(e,Tr(t,r)+"/capacity",Pr,n=>new Gn(n,t,r))}function Lp(e,t,r){return dr(e,Tr(t,r)+"/kind",Ls,n=>new Vn(n,t,r))}function Ep(e){return dr(e,"collateral",t=>{let r=Ee(t),n=qt(r);return new k(n)},t=>new Jn(t))}function Ap(e){return dr(e,"accounting_level",Ee,t=>new Kn(t))}function zp(e){return dr(e,"hold_indices",Nc,t=>new Yn(t))}function Tp(e){return dr(e,"selected_ship",t=>{let r=Ee(t),n=qt(r);return new k(n)},t=>new Fs(t))}function Js(e){let t=e.value;return t!=null?new k(t):new S}function Ks(e){let t=document.getElementById(e);return t?new k(t):new S}function Cp(e,t){let r,n=t;r=new I(n.storage,n.ships,new j(e),n.count_ship_index,n.count_hold_index,n.systems,n.source,n.destination,n.accounting_level,n.language,n.sidebar_expanded,n.collateral,n.trades);let i=r,s,o=i.storage;if(o instanceof C)s=F();else{let u=o[0];s=bu(u,new j(e))}let a=s;return Ge("Ship #"+B(e)+" selected"),[i,a]}function Mp(e){let t=new ye(new Me("New Ship",(()=>{let c=l([[e.count_hold_index,new et("Cargo",new tt,1e3)]]);return It(c)})()),!0),r=H(e.ships,e.count_ship_index,t),n,i=e;n=new I(i.storage,r,i.current_ship,e.count_ship_index+1,e.count_hold_index+1,i.systems,i.source,i.destination,i.accounting_level,i.language,i.sidebar_expanded,i.collateral,i.trades);let s=n,o,a=s.storage;if(a instanceof C)o=F();else{let c=a[0];o=Lt(l([wu(c,s.count_ship_index-1,"New Ship"),Bi(c,(()=>{let f=s.ships;return Te(f,(p,_)=>{let d=_.ship.holds;return Dt(d)})})()),Rs(c,s.count_ship_index-1,s.count_hold_index-1,"Cargo"),Hs(c,s.count_ship_index-1,s.count_hold_index-1,1e3),Gs(c,s.count_ship_index-1,s.count_hold_index-1,new tt)]))}return[s,o]}function Bp(e,t){let r=Ri(e.ships,t),n,i=e.current_ship;if(i instanceof j&&i[0]===t){let _=i[0];n=new C}else n=i;let s=n,o,a=e;o=new I(a.storage,r,s,a.count_ship_index,a.count_hold_index,a.systems,a.source,a.destination,a.accounting_level,a.language,a.sidebar_expanded,a.collateral,a.trades);let u=o,c,f=u.storage;if(f instanceof C)c=F();else{let _=f[0];c=Lt(l([bp(_,t),Bi(_,(()=>{let d=u.ships;return Te(d,(h,y)=>{let $=y.ship.holds;return Dt($)})})()),bu(_,new C)]))}return[u,c]}function qp(e,t,r,n){let i=Ls(t);if(!i.isOk())throw z("let_assert","mvu/update/ships",217,"user_updated_ship_hold_kind","Pattern match failed, no pattern matched the value.",{value:i});let s=i[0],o=N(e.ships,n);if(!o.isOk())throw z("let_assert","mvu/update/ships",218,"user_updated_ship_hold_kind","Pattern match failed, no pattern matched the value.",{value:o});let a=o[0],u=a.ship,c=N(u.holds,r);if(!c.isOk())throw z("let_assert","mvu/update/ships",220,"user_updated_ship_hold_kind","Pattern match failed, no pattern matched the value.",{value:c});let f=c[0],p,_=f;p=new et(_.name,s,_.capacity);let d=p,h=H(u.holds,r,d),y,$=u;y=new Me($.name,h);let O=y,v,L=a;v=new ye(O,L.is_expanded);let A=v,x=H(e.ships,n,A),M,E=e;M=new I(E.storage,x,E.current_ship,E.count_ship_index,E.count_hold_index,E.systems,E.source,E.destination,E.accounting_level,E.language,E.sidebar_expanded,E.collateral,E.trades);let P=M,G,Q=P.storage;if(Q instanceof C)G=F();else{let R=Q[0];G=Gs(R,n,r,s)}return[P,G]}function Np(e,t){let r=new et("New Hold",new tt,100),n=N(e.ships,t);if(!n.isOk())throw z("let_assert","mvu/update/ships",246,"user_added_hold_to_ship","Pattern match failed, no pattern matched the value.",{value:n});let i=n[0],s=i.ship,o=H(s.holds,e.count_hold_index,r),a,u=s;a=new Me(u.name,o);let c=a,f,p=i;f=new ye(c,p.is_expanded);let _=f,d=H(e.ships,t,_),h,y=e;h=new I(y.storage,d,y.current_ship,y.count_ship_index,e.count_hold_index+1,y.systems,y.source,y.destination,y.accounting_level,y.language,y.sidebar_expanded,y.collateral,y.trades);let $=h,O,v=$.storage;if(v instanceof C)O=F();else{let A=v[0];O=Lt(l([Bi(A,(()=>{let x=$.ships;return Te(x,(M,E)=>{let P=E.ship.holds;return Dt(P)})})()),Rs(A,t,$.count_hold_index-1,"New Hold"),Hs(A,t,$.count_hold_index-1,100),Gs(A,t,$.count_hold_index-1,new tt)]))}return[$,O]}function Ip(e,t,r){let n=N(e.ships,r);if(!n.isOk())throw z("let_assert","mvu/update/ships",298,"user_deleted_hold_from_ship","Pattern match failed, no pattern matched the value.",{value:n});let i=n[0],s=Ri(i.ship.holds,t),o,a=i.ship;o=new Me(a.name,s);let u=o,c,f=i;c=new ye(u,f.is_expanded);let p=c,_=H(e.ships,r,p),d,h=e;d=new I(h.storage,_,h.current_ship,h.count_ship_index,h.count_hold_index,h.systems,h.source,h.destination,h.accounting_level,h.language,h.sidebar_expanded,h.collateral,h.trades);let y=d,$,O=y.storage;if(O instanceof C)$=F();else{let L=O[0];$=Lt(l([yp(L,r,t),Bi(L,(()=>{let A=y.ships;return Te(A,(x,M)=>{let E=M.ship.holds;return Dt(E)})})())]))}return[y,$]}function Pp(e,t){let r=N(e.ships,t);if(!r.isOk())throw z("let_assert","mvu/update/ships",326,"user_collapsed_ship","Pattern match failed, no pattern matched the value.",{value:r});let n=r[0],i,s=n;i=new ye(s.ship,!1);let o=i,a=H(e.ships,t,o),u,c=e;return u=new I(c.storage,a,c.current_ship,c.count_ship_index,c.count_hold_index,c.systems,c.source,c.destination,c.accounting_level,c.language,c.sidebar_expanded,c.collateral,c.trades),[u,F()]}function Dp(e,t){let r=N(e.ships,t);if(!r.isOk())throw z("let_assert","mvu/update/ships",337,"user_expanded_ship","Pattern match failed, no pattern matched the value.",{value:r});let n=r[0],i,s=n;i=new ye(s.ship,!0);let o=i,a=H(e.ships,t,o),u,c=e;return u=new I(c.storage,a,c.current_ship,c.count_ship_index,c.count_hold_index,c.systems,c.source,c.destination,c.accounting_level,c.language,c.sidebar_expanded,c.collateral,c.trades),[u,F()]}function Up(e,t){let r=Ks(e),n=ze(r,o=>Js(o)),i=Zt(n,t),s=Vr(i);return s===""?t:s}function Fp(e,t){let r="ship-name-"+B(t),n=N(e.ships,t);if(!n.isOk())throw z("let_assert","mvu/update/ships",129,"user_updated_ship_name","Pattern match failed, no pattern matched the value.",{value:n});let s=n[0].ship.name,o=Up(r,s),a;{let _=N(e.ships,t);if(!_.isOk())throw z("let_assert","mvu/update/ships",136,"user_updated_ship_name","Pattern match failed, no pattern matched the value.",{value:_});let d=_[0],h=d.ship,y,$=h;y=new Me(o,$.holds);let O=y,v,L=d;v=new ye(O,L.is_expanded);let A=v,x=e;a=new I(x.storage,H(e.ships,t,A),x.current_ship,x.count_ship_index,x.count_hold_index,x.systems,x.source,x.destination,x.accounting_level,x.language,x.sidebar_expanded,x.collateral,x.trades)}let u=a,c,f=u.storage;if(f instanceof C)c=F();else{let _=f[0];c=wu(_,t,o)}return[u,c]}function Wp(e,t,r){let n="hold-name-"+B(t),i=N(e.ships,r);if(!i.isOk())throw z("let_assert","mvu/update/ships",155,"user_updated_ship_hold_name","Pattern match failed, no pattern matched the value.",{value:i});let s=i[0],o=s.ship,a=N(o.holds,t);if(!a.isOk())throw z("let_assert","mvu/update/ships",157,"user_updated_ship_hold_name","Pattern match failed, no pattern matched the value.",{value:a});let u=a[0],c=u.name,f=Up(n,c),p,_=u;p=new et(f,_.kind,_.capacity);let d=p,h=H(o.holds,t,d),y,$=o;y=new Me($.name,h);let O=y,v,L=s;v=new ye(O,L.is_expanded);let A=v,x=H(e.ships,r,A),M,E=e;M=new I(E.storage,x,E.current_ship,E.count_ship_index,E.count_hold_index,E.systems,E.source,E.destination,E.accounting_level,E.language,E.sidebar_expanded,E.collateral,E.trades);let P=M,G,Q=P.storage;if(Q instanceof C)G=F();else{let R=Q[0];G=Rs(R,r,t,f)}return[P,G]}function Nm(e,t){let r=Ks(e),n=ze(r,p=>Js(p)),i=ze(n,Pr),s,o=ze(n,Ee);s=He(o,oe);let a=s,u;return u=Ru(i,a),Zt(u,t)}function Rp(e,t,r){let n="hold-capacity-"+B(t),i=N(e.ships,r);if(!i.isOk())throw z("let_assert","mvu/update/ships",182,"user_updated_ship_hold_capacity","Pattern match failed, no pattern matched the value.",{value:i});let s=i[0],o=s.ship,a=N(o.holds,t);if(!a.isOk())throw z("let_assert","mvu/update/ships",184,"user_updated_ship_hold_capacity","Pattern match failed, no pattern matched the value.",{value:a});let u=a[0],c=u.capacity,f=Nm(n,c),p,_=u;p=new et(_.name,_.kind,f);let d=p,h=H(o.holds,t,d),y,$=o;y=new Me($.name,h);let O=y,v,L=s;v=new ye(O,L.is_expanded);let A=v,x=H(e.ships,r,A),M,E=e;M=new I(E.storage,x,E.current_ship,E.count_ship_index,E.count_hold_index,E.systems,E.source,E.destination,E.accounting_level,E.language,E.sidebar_expanded,E.collateral,E.trades);let P=M,G,Q=P.storage;if(Q instanceof C)G=F();else{let R=Q[0];G=Hs(R,r,t,f)}return[P,G]}function Hp(e){let t,r=e;return t=new I(r.storage,r.ships,r.current_ship,r.count_ship_index,r.count_hold_index,r.systems,r.source,r.destination,r.accounting_level,r.language,!1,r.collateral,r.trades),[t,F()]}function Gp(e){let t,r=e;return t=new I(r.storage,r.ships,r.current_ship,r.count_ship_index,r.count_hold_index,r.systems,r.source,r.destination,r.accounting_level,r.language,!0,r.collateral,r.trades),[t,F()]}function Vp(e,t){let r,n=e;r=new I(n.storage,n.ships,n.current_ship,n.count_ship_index,n.count_hold_index,n.systems,n.source,n.destination,n.accounting_level,n.language,n.sidebar_expanded,t,n.trades);let i=r,s,o=i.storage;if(o instanceof C)s=F();else{let u=o[0];s=vp(u,t)}return[i,s]}function Jp(e,t){let r,n=e;r=new I(n.storage,n.ships,n.current_ship,n.count_ship_index,n.count_hold_index,n.systems,n.source,n.destination,t,n.language,n.sidebar_expanded,n.collateral,n.trades);let i=r,s,o=i.storage;if(o instanceof C)s=F();else{let u=o[0];s=kp(u,t)}return[i,s]}function Ys(e){window.alert(e)}function Kp(e,t){let r,n=e;r=new I(new j(t),n.ships,n.current_ship,n.count_ship_index,n.count_hold_index,n.systems,n.source,n.destination,n.accounting_level,n.language,n.sidebar_expanded,n.collateral,n.trades);let i=r,s=Lt(l([Ep(t),Ap(t),zp(t),Tp(t)]));return[i,s]}function Yp(e){return Ys(`Failed to load local storage
Check console log for more info`),[e,F()]}function Xp(e,t,r){return Ys('Failed to write storage key "'+t+'" with value "'+r+`"
Check console log for more info`),[e,F()]}function Qp(e,t){return tr('Failed to read storage key "'+t+'"'),[e,F()]}function Zp(e,t,r){let n;{let s=N(e.ships,r);if(!s.isOk())throw z("let_assert","mvu/update/store",65,"store_read_ship_name","Pattern match failed, no pattern matched the value.",{value:s});let o=s[0],a=o.ship,u,c=a;u=new Me(t,c.holds);let f=u,p,_=o;p=new ye(f,_.is_expanded);let d=p,h=e;n=new I(h.storage,H(e.ships,r,d),h.current_ship,h.count_ship_index,h.count_hold_index,h.systems,h.source,h.destination,h.accounting_level,h.language,h.sidebar_expanded,h.collateral,h.trades)}return[n,F()]}function ef(e,t){let r,n=e;return r=new I(n.storage,n.ships,n.current_ship,n.count_ship_index,n.count_hold_index,n.systems,n.source,n.destination,t,n.language,n.sidebar_expanded,n.collateral,n.trades),[r,F()]}function tf(e,t){let r,n=e;return r=new I(n.storage,n.ships,n.current_ship,n.count_ship_index,n.count_hold_index,n.systems,n.source,n.destination,n.accounting_level,n.language,n.sidebar_expanded,t,n.trades),[r,F()]}function rf(e,t,r,n){let i=N(e.ships,r);if(!i.isOk())throw z("let_assert","mvu/update/store",96,"store_read_hold_capacity","Pattern match failed, no pattern matched the value.",{value:i});let s=i[0],o=s.ship,a=N(o.holds,n);if(!a.isOk())throw z("let_assert","mvu/update/store",98,"store_read_hold_capacity","Pattern match failed, no pattern matched the value.",{value:a});let u=a[0],c,f=u;c=new et(f.name,f.kind,t);let p=c,_=H(o.holds,n,p),d,h=o;d=new Me(h.name,_);let y=d,$,O=s;$=new ye(y,O.is_expanded);let v=$,L=H(e.ships,r,v),A,x=e;return A=new I(x.storage,L,x.current_ship,x.count_ship_index,x.count_hold_index,x.systems,x.source,x.destination,x.accounting_level,x.language,x.sidebar_expanded,x.collateral,x.trades),[A,F()]}function nf(e,t){let r=e.storage;if(r instanceof j){let n=r[0],i=Te(t,(d,h)=>{let y,$=W(h,L=>[L,new et("New Hold",new tt,100)]);y=It($);let O=y,v=new Me("New Ship",O);return new ye(v,!1)}),s,o=e;s=new I(o.storage,i,o.current_ship,o.count_ship_index,o.count_hold_index,o.systems,o.source,o.destination,o.accounting_level,o.language,o.sidebar_expanded,o.collateral,o.trades);let a=s,u,c=Te(t,(d,h)=>{let y=l([jp(n,d)]);return Z(h,y,($,O)=>w(Op(n,d,O),w(Sp(n,d,O),w(Lp(n,d,O),$))))}),f=Ie(c),p=bt(f);return u=Lt(p),[a,u]}else return[e,F()]}function sf(e,t,r,n){let i=N(e.ships,r);if(!i.isOk())throw z("let_assert","mvu/update/store",158,"store_read_hold_kind","Pattern match failed, no pattern matched the value.",{value:i});let s=i[0],o=s.ship,a=N(o.holds,n);if(!a.isOk())throw z("let_assert","mvu/update/store",160,"store_read_hold_kind","Pattern match failed, no pattern matched the value.",{value:a});let u=a[0],c,f=u;c=new et(f.name,t,f.capacity);let p=c,_=H(o.holds,n,p),d,h=o;d=new Me(h.name,_);let y=d,$,O=s;$=new ye(y,O.is_expanded);let v=$,L=H(e.ships,r,v),A,x=e;return A=new I(x.storage,L,x.current_ship,x.count_ship_index,x.count_hold_index,x.systems,x.source,x.destination,x.accounting_level,x.language,x.sidebar_expanded,x.collateral,x.trades),[A,F()]}function of(e,t,r,n){let i=N(e.ships,r);if(!i.isOk())throw z("let_assert","mvu/update/store",176,"store_read_hold_name","Pattern match failed, no pattern matched the value.",{value:i});let s=i[0],o=s.ship,a=N(o.holds,n);if(!a.isOk())throw z("let_assert","mvu/update/store",178,"store_read_hold_name","Pattern match failed, no pattern matched the value.",{value:a});let u=a[0],c,f=u;c=new et(t,f.kind,f.capacity);let p=c,_=H(o.holds,n,p),d,h=o;d=new Me(h.name,_);let y=d,$,O=s;$=new ye(y,O.is_expanded);let v=$,L=H(e.ships,r,v),A,x=e;return A=new I(x.storage,L,x.current_ship,x.count_ship_index,x.count_hold_index,x.systems,x.source,x.destination,x.accounting_level,x.language,x.sidebar_expanded,x.collateral,x.trades),[A,F()]}function lf(e,t){let r,n=e;return r=new I(n.storage,n.ships,t,n.count_ship_index,n.count_hold_index,n.systems,n.source,n.destination,n.accounting_level,n.language,n.sidebar_expanded,n.collateral,n.trades),[r,F()]}function uf(e,t){let r,n=t;r=new I(n.storage,n.ships,n.current_ship,n.count_ship_index,n.count_hold_index,n.systems,new j(e),n.destination,n.accounting_level,n.language,n.sidebar_expanded,n.collateral,n.trades);let i=r,s=F();return Ge("Source "+e+" selected"),[i,s]}function af(e,t){let r,n=t;r=new I(n.storage,n.ships,n.current_ship,n.count_ship_index,n.count_hold_index,n.systems,n.source,new j(e),n.accounting_level,n.language,n.sidebar_expanded,n.collateral,n.trades);let i=r,s=F();return Ge("Destination "+e+" selected"),[i,s]}function cf(e,t,r,n){if(!t.isOk()&&t[0]instanceof $n&&t[0][0]instanceof Or&&t[0][0].status===404&&t[0][0].body==='{"error":"Requested page does not exist!"}'){Ge("Reached sell orders last page for location "+r);let i=N(e.systems,r);if(!i.isOk())throw z("let_assert","mvu/update/systems",48,"esi_returned_sell_orders","Pattern match failed, no pattern matched the value.",{value:i});let s=i[0];Ge((()=>{let y=s.sell_orders,$=nt(y);return B($)})()+" sell orders found");let o=N(e.systems,r);if(!o.isOk())throw z("let_assert","mvu/update/systems",54,"esi_returned_sell_orders","Pattern match failed, no pattern matched the value.",{value:o});let a=o[0],u,c=a;u=new xt(c.location,c.buy_orders,c.buy_orders_status,c.sell_orders,new pr(Ql()));let f=u,p=rr(e.systems,r,y=>(qr(y,()=>{throw z("panic","mvu/update/systems",64,"","system "+r+" should be present",{})}),f)),_,d=e;return _=new I(d.storage,d.ships,d.current_ship,d.count_ship_index,d.count_hold_index,p,d.source,d.destination,d.accounting_level,d.language,d.sidebar_expanded,d.collateral,d.trades),[_,F()]}else if(t.isOk()){let i=t[0],s=N(e.systems,r);if(!s.isOk())throw z("let_assert","mvu/update/systems",76,"esi_returned_sell_orders","Pattern match failed, no pattern matched the value.",{value:s});let o=s[0],a=Wr(i,p=>Fr(o.location.stations,p.location_id)),u=H(e.systems,r,(()=>{let p=o;return new xt(p.location,p.buy_orders,p.buy_orders_status,(()=>{let _=o.sell_orders;return pe(_,a)})(),p.sell_orders_status)})()),c=N(e.systems,r);if(!c.isOk())throw z("let_assert","mvu/update/systems",90,"esi_returned_sell_orders","Pattern match failed, no pattern matched the value.",{value:c});let f=c[0];return Ge("Fetched "+r+" sell orders page "+B(n)),[(()=>{let p=e;return new I(p.storage,p.ships,p.current_ship,p.count_ship_index,p.count_hold_index,u,p.source,p.destination,p.accounting_level,p.language,p.sidebar_expanded,p.collateral,p.trades)})(),xu(f.location,r,n+1)]}else{let i=t[0];return tr(Jr(i)),[e,F()]}}function pf(e,t,r,n){if(!t.isOk()&&t[0]instanceof $n&&t[0][0]instanceof Or&&t[0][0].status===404&&t[0][0].body==='{"error":"Requested page does not exist!"}'){Ge("Reached buy orders last page for location "+r);let i=N(e.systems,r);if(!i.isOk())throw z("let_assert","mvu/update/systems",119,"esi_returned_buy_orders","Pattern match failed, no pattern matched the value.",{value:i});let s=i[0];Ge((()=>{let y=s.buy_orders,$=nt(y);return B($)})()+" buy orders found");let o=N(e.systems,r);if(!o.isOk())throw z("let_assert","mvu/update/systems",123,"esi_returned_buy_orders","Pattern match failed, no pattern matched the value.",{value:o});let a=o[0],u,c=a;u=new xt(c.location,c.buy_orders,new pr(Ql()),c.sell_orders,c.sell_orders_status);let f=u,p=rr(e.systems,r,y=>(qr(y,()=>{throw z("panic","mvu/update/systems",133,"","system "+r+" should be present",{})}),f)),_,d=e;return _=new I(d.storage,d.ships,d.current_ship,d.count_ship_index,d.count_hold_index,p,d.source,d.destination,d.accounting_level,d.language,d.sidebar_expanded,d.collateral,d.trades),[_,F()]}else if(t.isOk()){let i=t[0],s=rr(e.systems,r,u=>{let c=qr(u,()=>{throw z("panic","mvu/update/systems",149,"","system "+r+" should be present",{})}),f=c;return new xt(f.location,(()=>{let p=c.buy_orders;return pe(p,i)})(),f.buy_orders_status,f.sell_orders,f.sell_orders_status)}),o=N(e.systems,r);if(!o.isOk())throw z("let_assert","mvu/update/systems",156,"esi_returned_buy_orders","Pattern match failed, no pattern matched the value.",{value:o});let a=o[0];return Ge("Fetched "+r+" buy orders page "+B(n)),[(()=>{let u=e;return new I(u.storage,u.ships,u.current_ship,u.count_ship_index,u.count_hold_index,s,u.source,u.destination,u.accounting_level,u.language,u.sidebar_expanded,u.collateral,u.trades)})(),gu(a.location,r,n+1)]}else{let i=t[0];return tr(Jr(i)),[e,F()]}}function ff(e,t){let r=N(e.systems,t);if(!r.isOk())throw z("let_assert","mvu/update/systems",176,"user_loaded_source","Pattern match failed, no pattern matched the value.",{value:r});let n=r[0],i=xu(n.location,t,1),s,o=n;s=new xt(o.location,o.buy_orders,o.buy_orders_status,l([]),new Ct);let a=s,u=rr(e.systems,t,_=>(qr(_,()=>{throw z("panic","mvu/update/systems",184,"","did not find system "+t,{})}),a)),c,f=e.source;if(f instanceof j&&f[0]===t){let _=f[0],d=e;c=new I(d.storage,d.ships,d.current_ship,d.count_ship_index,d.count_hold_index,d.systems,new C,d.destination,d.accounting_level,d.language,d.sidebar_expanded,d.collateral,d.trades)}else c=e;let p=c;return[(()=>{let _=p;return new I(_.storage,_.ships,_.current_ship,_.count_ship_index,_.count_hold_index,u,_.source,_.destination,_.accounting_level,_.language,_.sidebar_expanded,_.collateral,_.trades)})(),i]}function df(e,t){let r=N(e.systems,t);if(!r.isOk())throw z("let_assert","mvu/update/systems",200,"user_loaded_destination","Pattern match failed, no pattern matched the value.",{value:r});let n=r[0],i=gu(n.location,t,1),s,o=n;s=new xt(o.location,l([]),new Ct,o.sell_orders,o.sell_orders_status);let a=s,u=rr(e.systems,t,_=>(qr(_,()=>{throw z("panic","mvu/update/systems",208,"","did not find system "+t,{})}),a)),c,f=e.destination;if(f instanceof j&&f[0]===t){let _=f[0],d=e;c=new I(d.storage,d.ships,d.current_ship,d.count_ship_index,d.count_hold_index,d.systems,d.source,new C,d.accounting_level,d.language,d.sidebar_expanded,d.collateral,d.trades)}else c=e;let p=c;return[(()=>{let _=p;return new I(_.storage,_.ships,_.current_ship,_.count_ship_index,_.count_hold_index,u,_.source,_.destination,_.accounting_level,_.language,_.sidebar_expanded,_.collateral,_.trades)})(),i]}function _f(e,t){if(t instanceof bn){let r=t.new_destination;return af(r,e)}else if(t instanceof wn){let r=t.new_source;return uf(r,e)}else if(t instanceof zr){let r=t.ship_id;return Cp(r,e)}else if(t instanceof yn){let r=t[0],n=t.location,i=t.page;return pf(e,r,n,i)}else if(t instanceof vn){let r=t[0],n=t.location,i=t.page;return cf(e,r,n,i)}else if(t instanceof Er){let r=t.destination;return df(e,r)}else if(t instanceof Lr){let r=t.source;return ff(e,r)}else if(t instanceof On){let r=t.multibuy;return $p(e,r)}else{if(t instanceof jn)return xp(e);if(t instanceof kn){let r=t[0];return gp(e,r)}else{if(t instanceof Ln)return Hp(e);if(t instanceof Sn)return Gp(e);if(t instanceof Ar){let r=t.value;return Vp(e,r)}else if(t instanceof En){let r=t.level;return Jp(e,r)}else{if(t instanceof An)return Mp(e);if(t instanceof zn){let r=t.deleted_ship;return Bp(e,r)}else if(t instanceof Tn){let r=t.id;return Fp(e,r)}else if(t instanceof Cn){let r=t.hold_id,n=t.ship_id;return Wp(e,r,n)}else if(t instanceof Mn){let r=t.hold_id,n=t.ship_id;return Rp(e,r,n)}else if(t instanceof Bn){let r=t.kind,n=t.hold_id,i=t.ship_id;return qp(e,r,n,i)}else if(t instanceof qn){let r=t.ship_id;return Np(e,r)}else if(t instanceof Nn){let r=t.hold_id,n=t.ship_id;return Ip(e,r,n)}else if(t instanceof In){let r=t.ship_id;return Pp(e,r)}else if(t instanceof Pn){let r=t.ship_id;return Dp(e,r)}else if(t instanceof Fn){let r=t.storage_key,n=t.value;return Xp(e,r,n)}else if(t instanceof Wn){let r=t.storage_key;return Qp(e,r)}else if(t instanceof Rn){let r=t.name,n=t.id;return Zp(e,r,n)}else if(t instanceof Kn){let r=t.accounting_level;return ef(e,r)}else if(t instanceof Jn){let r=t.collateral;return tf(e,r)}else if(t instanceof Gn){let r=t.capacity,n=t.ship_id,i=t.hold_id;return rf(e,r,n,i)}else if(t instanceof Yn){let r=t.hold_indices;return nf(e,r)}else if(t instanceof Vn){let r=t.kind,n=t.ship_id,i=t.hold_id;return sf(e,r,n,i)}else if(t instanceof Hn){let r=t.name,n=t.ship_id,i=t.hold_id;return of(e,r,n,i)}else if(t instanceof Dn){let r=t.storage;return Kp(e,r)}else{if(t instanceof Un)return Yp(e);{let r=t.selected_ship;return lf(e,r)}}}}}}var mf="http://www.w3.org/2000/svg";function he(e,t){return tn(mf,"svg",e,t)}function $e(e){return tn(mf,"path",e,U)}function Rm(e){return e==="input"||e==="change"||e==="focus"||e==="focusin"||e==="focusout"||e==="blur"?!0:e==="select"}function yu(e,t){return Oa(e,t,U,!1,!1,Rm(e),new Zr(0))}function xe(e){return yu("click",Ft(e))}function Cr(e){return yu("input",Bo(l(["target","value"]),jt,t=>Ft(e(t))))}function Qs(e){return yu("blur",Ft(e))}function Hm(){return T(l([b("flex justify-center my-8")]),l([Ue(l([b("bg-selected hover:bg-indigo-700 text-white font-bold py-3 px-8 rounded-lg shadow-md flex items-center transition-colors duration-200"),xe(new jn)]),l([he(l([g("stroke","currentColor"),g("viewBox","0 0 24 24"),g("fill","none"),b("h-5 w-5 mr-2"),g("xmlns","http://www.w3.org/2000/svg")]),l([$e(l([g("d","M9 7h6m0 10v-3m-3 3h.01M9 17h.01M9 14h.01M12 14h.01M15 11h.01M12 11h.01M9 11h.01M7 21h10a2 2 0 002-2V5a2 2 0 00-2-2H7a2 2 0 00-2 2v14a2 2 0 002 2z"),g("stroke-width","2"),g("stroke-linejoin","round"),g("stroke-linecap","round")]))])),q(`Compute Multibuys
                    `)]))]))}function Gm(){return T(l([b("flex justify-center my-8")]),l([Ue(l([b("bg-gray-400 text-gray-200 font-bold py-3 px-8 rounded-lg shadow-md flex items-center cursor-not-allowed"),Ea(!0)]),l([he(l([g("stroke","currentColor"),g("viewBox","0 0 24 24"),g("fill","none"),b("h-5 w-5 mr-2"),g("xmlns","http://www.w3.org/2000/svg")]),l([$e(l([g("d","M9 7h6m0 10v-3m-3 3h.01M9 17h.01M9 14h.01M12 14h.01M15 11h.01M12 11h.01M9 11h.01M7 21h10a2 2 0 002-2V5a2 2 0 00-2-2H7a2 2 0 00-2 2v14a2 2 0 002 2z"),g("stroke-width","2"),g("stroke-linejoin","round"),g("stroke-linecap","round")]))])),q(`Compute Multibuys
                    `)]))]))}function Vm(e,t,r,n){return e instanceof j&&t instanceof j&&r instanceof j&&n instanceof j?Hm():Gm()}function Jm(e){return T(l([b("mb-6")]),l([T(l([b("relative bg-white rounded-t-lg shadow-md")]),l([T(l([b("absolute top-3 right-3")]),l([Ue(l([g("title","Copy to clipboard"),b("p-1 hover:bg-gray-100 rounded"),xe(new On(e))]),l([he(l([g("stroke","currentColor"),g("viewBox","0 0 24 24"),g("fill","none"),b("h-5 w-5 text-gray-500"),g("xmlns","http://www.w3.org/2000/svg")]),l([$e(l([g("d","M8 5H6a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2v-1M8 5a2 2 0 002 2h2a2 2 0 002-2M8 5a2 2 0 012-2h2a2 2 0 012 2m0 0h2a2 2 0 012 2v3m2 4H10m0 0l3-3m-3 3l3 3"),g("stroke-width","2"),g("stroke-linejoin","round"),g("stroke-linecap","round")]))]))]))])),T(l([g("aria-readonly","true"),b("p-4 bg-gray-50 rounded-t-lg text-gray-700 font-mono text-sm h-24 overflow-y-auto")]),(()=>{let t=W(Fc(e),r=>l([q(Xl(r)),$c(l([]))]));return bt(t)})())])),T(l([b("bg-white rounded-b-lg shadow-md p-3 border-t border-gray-200")]),l([T(l([b("flex justify-between items-center")]),l([K(l([b("font-medium text-gray-700")]),l([q("Total Price:")])),K(l([b("font-bold text-gray-900")]),l([q(jr(Yl(e))+" ISK")]))]))]))]))}function Km(e,t){return T(l([b("mb-6 bg-white rounded-lg shadow-md p-4 border-l-4 border-green-500")]),l([T(l([b("flex justify-between items-center")]),l([T(l([]),l([yr(l([b("text-lg font-semibold text-gray-800")]),l([q("Total Projected Profits")])),Il(l([b("text-sm text-gray-500")]),l([q("Based on current market data")]))])),T(l([b("text-right")]),l([K(l([b("text-2xl font-bold text-green-600")]),l([q(jr(e)+" ISK")])),Il(l([b("text-sm text-green-500")]),l([q(jr(Ir(t,2))+"% ROI")]))]))]))]))}function hf(e){let t,r=W(e.trades,d=>{if(d instanceof gn){let h=d.multibuy;return new k(h)}else return new S(void 0)}),n=oi(r);t=Zt(n,l([]));let i=t,s=W(i,Jm),o=Z(i,[0,0],(d,h)=>{let y=d[0],$=d[1];return[y+Wc(h),$+Yl(h)]}),a=o[0],u=o[1],c=Ne(a,u)*100,f=Ur(i),p;f?p=T(l([Sa(!0)]),l([])):p=Km(a,c);let _=p;return ys(l([]),(()=>{let d=l([Vm(e.current_ship,e.collateral,e.source,e.destination),_]);return pe(d,s)})())}function $f(e){let t;t=B(e);let n=t,i,s=un(e),o=Ir(s,3);i=Ke(o);let a=i;return T(l([b("p-4 border-b border-gray-200")]),l([T(l([b("flex justify-between items-center mb-2")]),l([vs(l([b("block text-sm font-medium text-gray-700"),ss("accounting-level")]),l([q("Accounting Level")])),K(l([b("text-sm font-medium text-selected")]),l([q(n)]))])),T(l([b("relative mb-6")]),l([Gt(l([b("w-full h-1 bg-gray-200 rounded-md appearance-none cursor-pointer focus:outline-none focus:ring-2 focus:ring-selected focus:ring-opacity-50"),_t("accounting-level"),os("1"),St(n),Aa("5"),za("0"),Wt("range"),Cr(u=>{let c=Ee(u);if(!c.isOk())throw z("let_assert","mvu/view/sidebar/accounting",44,"","Pattern match failed, no pattern matched the value.",{value:c});let f=c[0];return new En(f)})]))])),T(l([b("flex justify-between text-xs text-gray-500 px-1")]),l([K(l([]),l([q("0")])),K(l([]),l([q("1")])),K(l([]),l([q("2")])),K(l([]),l([q("3")])),K(l([]),l([q("4")])),K(l([]),l([q("5")]))])),T(l([b("mt-2 text-xs text-gray-500")]),l([K(l([]),l([q("Effective tax rate: ")])),K(l([b("font-medium text-gray-700")]),l([q(a+"%")]))]))]))}function Qm(){return Gt(l([Xo("0"),os("1"),b("focus:ring-indigo-500 focus:border-indigo-500 block w-full pl-12 pr-12 sm:text-sm border-gray-300 rounded-md p-2 border"),_t("max-collateral"),Yo("max-collateral"),Wt("number"),Cr(e=>fp(e,t=>new Ar(t)))]))}function Zm(e){return Gt(l([Xo("0"),b("focus:ring-indigo-500 focus:border-indigo-500 block w-full pl-12 pr-12 sm:text-sm border-gray-300 rounded-md p-2 border"),_t("max-collateral"),Yo("max-collateral"),Wt("number"),St(B(e)),Cr(t=>{let r,n=Ee(t);r=qt(n);let i=r;return new Ar(i)})]))}function xf(e){let t;if(e instanceof C)t=Qm();else{let n=e[0];t=Zm(n)}let r=t;return T(l([b("p-4 border-b border-gray-200")]),l([vs(l([b("block text-sm font-medium text-gray-700 mb-1"),ss("max-collateral")]),l([q("Max Collateral")])),T(l([b("relative rounded-md shadow-sm")]),l([T(l([b("absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none")]),l([K(l([b("text-gray-500 sm:text-sm")]),l([q("ISK")]))])),r,T(l([b("absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none")]),l([K(l([b("text-gray-500 sm:text-sm")]),l([q("million")]))]))]))]))}var Zs=class extends m{constructor(t,r,n,i,s){super(),this.container=t,this.header=r,this.name_input=n,this.capacity_text=i,this.arrow_icon=s}};function th(e,t,r){let n=(()=>{let i=Z((()=>{let s=t.holds;return Ie(s)})(),0,(s,o)=>s+o.capacity);return jr(i)})()+" m\xB3";return T(l([b(r.container)]),l([T(l([b(r.header)]),l([T(l([b("pl-3 pt-3 pb-3 flex-grow flex items-center text-right"),xe(new zr(e))]),l([K(l([b(r.name_input+" text-left")]),l([q(t.name)])),K(l([b(r.capacity_text)]),l([q(n)]))])),T(l([b("flex-shrink-0 pt-3 pb-3 pr-3"),xe(new Pn(e))]),l([he(l([g("stroke","currentColor"),g("viewBox","0 0 24 24"),g("fill","none"),b("h-5 w-5 ml-2"),g("xmlns","http://www.w3.org/2000/svg")]),l([$e(l([g("d","M19 9l-7 7-7-7"),g("stroke-width","2"),g("stroke-linejoin","round"),g("stroke-linecap","round")]))]))]))]))]))}function rh(e,t,r){let n="hold-name-"+B(e),i="hold-capacity-"+B(e),s,o=kc();s=W(o,u=>{let c=Ss(u),f=Ae(c),p=t.kind;if(J(p,u)){let _=p;return Dl(l([St(f),Ta(!0)]),c)}else return Dl(l([St(f)]),c)});let a=s;return T(l([b("mb-3 p-3 bg-white rounded-md shadow-sm")]),l([T(l([b("flex justify-between items-center mb-2")]),l([Gt(l([b("border border-gray-300 rounded-md px-2 py-1 text-sm w-1/2"),_t(n),St(t.name),Wt("text"),Qs(new Cn(e,r))])),T(l([b("flex items-center")]),l([Gt(l([b("border border-gray-300 rounded-md px-2 py-1 text-sm w-20 mr-2"),St((()=>{let u=t.capacity;return Ke(u)})()),_t(i),Wt("number"),Qs(new Mn(e,r))])),K(l([b("text-xs text-gray-500")]),l([q("m\xB3")]))]))])),T(l([b("flex items-center mt-2")]),l([xc(l([b("border border-gray-300 rounded-md px-2 py-1 text-sm flex-grow"),Cr(u=>new Bn(u,e,r))]),a),Ue(l([g("title","Delete Hold"),b("ml-2 p-1 text-red-500 hover:bg-red-50 rounded-md"),xe(new Nn(e,r))]),l([he(l([g("stroke","currentColor"),g("viewBox","0 0 24 24"),g("fill","none"),b("h-4 w-4"),g("xmlns","http://www.w3.org/2000/svg")]),l([$e(l([g("d","M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"),g("stroke-width","2"),g("stroke-linejoin","round"),g("stroke-linecap","round")]))]))]))]))]))}function nh(e){return Ue(l([b("flex items-center justify-center w-full py-2 border border-dashed border-gray-300 rounded-md text-sm text-gray-500 hover:bg-gray-50 mb-3"),xe(new qn(e))]),l([he(l([g("stroke","currentColor"),g("viewBox","0 0 24 24"),g("fill","none"),b("h-4 w-4 mr-1"),g("xmlns","http://www.w3.org/2000/svg")]),l([$e(l([g("d","M12 4v16m8-8H4"),g("stroke-width","2"),g("stroke-linejoin","round"),g("stroke-linecap","round")]))])),q(`Add Hold
                            `)]))}function ih(e){return Ue(l([b("flex items-center justify-center w-full py-2 border border-red-200 text-red-600 rounded-md text-sm hover:bg-red-50 hover:border-red-300 transition-colors"),xe(new zn(e))]),l([he(l([g("stroke","currentColor"),g("viewBox","0 0 24 24"),g("fill","none"),b("h-4 w-4 mr-1"),g("xmlns","http://www.w3.org/2000/svg")]),l([$e(l([g("d","M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"),g("stroke-width","2"),g("stroke-linejoin","round"),g("stroke-linecap","round")]))])),q(`Delete Ship
                            `)]))}function sh(e,t,r){let n=l([nh(e),ih(e)]),i,s=Te(t.holds,(f,p)=>rh(f,p,e));i=Ie(s);let o=i,a=(()=>{let f=Z((()=>{let p=t.holds;return Ie(p)})(),0,(p,_)=>p+_.capacity);return jr(f)})()+" m\xB3",u=pe(o,n),c="ship-name-"+B(e);return T(l([b(r.container)]),l([T(l([b(r.header)]),l([T(l([b("pl-3 pt-3 pb-3 flex-grow flex items-center text-right"),xe(new zr(e))]),l([Gt(l([b(r.name_input+" border-b"),_t(c),St(t.name),Wt("text"),Qs(new Tn(e))])),K(l([b(r.capacity_text)]),l([q(a)]))])),T(l([b("pt-3 pb-3 pr-3 flex-shrink-0"),xe(new In(e))]),l([he(l([g("stroke","currentColor"),g("viewBox","0 0 24 24"),g("fill","none"),b(r.arrow_icon+" rotate-180"),g("xmlns","http://www.w3.org/2000/svg")]),l([$e(l([g("d","M19 9l-7 7-7-7"),g("stroke-width","2"),g("stroke-linejoin","round"),g("stroke-linecap","round")]))]))]))])),T(l([b("border-t border-gray-200")]),l([T(l([b("p-3")]),u)]))]))}function oh(){return Ue(l([b("flex items-center justify-center w-full py-3 border border-dashed border-gray-300 rounded-md text-sm text-gray-500 hover:bg-gray-50"),xe(new An)]),l([he(l([g("stroke","currentColor"),g("viewBox","0 0 24 24"),g("fill","none"),b("h-5 w-5 mr-1"),g("xmlns","http://www.w3.org/2000/svg")]),l([$e(l([g("d","M12 4v16m8-8H4"),g("stroke-width","2"),g("stroke-linejoin","round"),g("stroke-linecap","round")]))])),q(`Add Ship
                `)]))}var lh=new Zs("mb-3 border border-gray-200 rounded-md hover:border-gray-300","bg-gray-50 rounded-t-md flex justify-between items-center cursor-pointer hover:bg-gray-100","font-medium bg-transparent border-0 border-gray-300 focus:ring-0 focus:border-gray-500 px-0 py-0 w-24","text-sm text-gray-600 mr-2 flex-grow","h-5 w-5 ml-2"),uh=new Zs("mb-3 border-2 border-selected rounded-md bg-indigo-50","bg-indigo-100 rounded-t-md flex justify-between items-center cursor-pointer hover:bg-indigo-200","font-medium text-selected bg-transparent border-0 border-indigo-300 focus:ring-0 focus:border-selected px-0 py-0 w-24","text-sm text-selected mr-2 flex-grow","h-5 w-5 ml-2 text-selected");function ah(e,t,r){let n;r?n=uh:n=lh;let i=n;return t.is_expanded?sh(e,t.ship,i):th(e,t.ship,i)}function gf(e){let t=(o,a)=>{let u,c=e.current_ship;if(c instanceof j&&c[0]===o){let p=c[0];u=!0}else u=!1;return ah(o,a,u)},r,n=Te(e.ships,t);r=Ie(n);let i=r,s=w(yr(l([b("text-sm font-medium text-gray-700 mb-3")]),l([q("Ships")])),pe(i,l([oh()])));return T(l([b("p-4")]),s)}function ph(e){return Nl(l([b("fixed z-10 top-0 left-0 w-80 bg-white shadow-lg h-screen overflow-y-auto flex-shrink-0 border-r border-gray-200")]),l([T(l([b("p-4 border-b border-gray-200 flex justify-between items-center")]),l([bs(l([b("text-lg font-bold")]),l([q("Configuration")])),Ue(l([g("title","Toggle Sidebar"),b("p-1 rounded-md hover:bg-gray-100"),xe(new Ln)]),l([he(l([g("stroke","currentColor"),g("viewBox","0 0 24 24"),g("fill","none"),b("h-6 w-6"),g("xmlns","http://www.w3.org/2000/svg")]),l([$e(l([g("d","M11 19l-7-7 7-7m8 14l-7-7 7-7"),g("stroke-width","2"),g("stroke-linejoin","round"),g("stroke-linecap","round")]))]))]))])),xf(e.collateral),$f(e.accounting_level),gf(e)]))}function fh(){return T(l([b("flex flex-col items-center")]),l([T(l([b("w-8 h-8 flex items-center justify-center bg-gray-300 rounded-md mb-1 text-gray-600 font-bold text-lg")]),l([q(`\xD8
                `)])),K(l([b("text-xs font-medium text-gray-500 text-center")]),l([q("No Ship Selected")]))]))}function dh(e){let t=nr(e.ship.holds,0,(a,u,c)=>a+c.capacity),r=Si(Xt(t))+" m\xB3",n,i=e.ship.name;n=ii(i);let s=n;if(!s.isOk())throw z("let_assert","mvu/view/sidebar",246,"get_ship_selected_icon","Pattern match failed, no pattern matched the value.",{value:s});let o=s[0][0];return T(l([b("flex flex-col items-center")]),l([T(l([b("w-8 h-8 flex items-center justify-center bg-blue-600 rounded-md mb-1 text-white font-bold")]),l([q(o)])),K(l([b("text-xs font-medium")]),l([q(r)]))]))}function _h(e){let t,r=e.collateral;t=Nt(r,0);let i=Bc(t),s="LvL "+(()=>{let f=e.accounting_level;return B(f)})(),o=(()=>{let f=un(e.accounting_level),p=Ir(f,3);return Ke(p)})()+"%",a,u=e.current_ship;if(u instanceof C)a=fh();else{let f=u[0],p=N(e.ships,f);if(!p.isOk())throw z("let_assert","mvu/view/sidebar",92,"get_collapsed_sidebar","Pattern match failed, no pattern matched the value.",{value:p});let _=p[0];a=dh(_)}let c=a;return Nl(l([b("fixed top-0 left-0 w-16 bg-white shadow-lg h-screen overflow-y-auto flex-shrink-0 border-r border-gray-200")]),l([T(l([b("p-4 border-b border-gray-200 flex justify-center items-center")]),l([Ue(l([g("title","Toggle Sidebar"),b("p-1 rounded-md hover:bg-gray-100"),_t("toggle-sidebar"),xe(new Sn)]),l([he(l([g("stroke","currentColor"),g("viewBox","0 0 24 24"),g("fill","none"),b("h-6 w-6"),g("xmlns","http://www.w3.org/2000/svg")]),l([$e(l([g("d","M13 5l7 7-7 7M5 5l7 7-7 7"),g("stroke-width","2"),g("stroke-linejoin","round"),g("stroke-linecap","round")]))]))]))])),T(l([b("flex flex-col items-center pt-4 space-y-6")]),l([T(l([b("flex flex-col items-center")]),l([T(l([b("w-8 h-8 flex items-center justify-center bg-gray-100 rounded-md mb-1")]),l([he(l([g("stroke","currentColor"),g("viewBox","0 0 24 24"),g("fill","none"),b("h-6 w-6 text-gray-600"),g("xmlns","http://www.w3.org/2000/svg")]),l([$e(l([g("d","M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"),g("stroke-width","2"),g("stroke-linejoin","round"),g("stroke-linecap","round")]))]))])),K(l([b("text-xs font-medium")]),l([q(i)]))])),T(l([b("flex flex-col items-center")]),l([T(l([b("w-8 h-8 flex items-center justify-center bg-gray-100 rounded-md mb-1")]),l([he(l([g("stroke","currentColor"),g("viewBox","0 0 24 24"),g("fill","none"),b("h-6 w-6 text-gray-600"),g("xmlns","http://www.w3.org/2000/svg")]),l([$e(l([g("d","M9 7h6m0 10v-3m-3 3h.01M9 17h.01M9 14h.01M12 14h.01M15 11h.01M12 11h.01M9 11h.01M7 21h10a2 2 0 002-2V5a2 2 0 00-2-2H7a2 2 0 00-2 2v14a2 2 0 002 2z"),g("stroke-width","2"),g("stroke-linejoin","round"),g("stroke-linecap","round")]))]))])),K(l([b("text-xs font-medium text-selected")]),l([q(s)])),K(l([b("text-[10px] text-gray-500")]),l([q(o)]))])),c]))]))}function wf(e){let t;return e.sidebar_expanded?t=ph:t=_h,t(e)}function vu(e,t){let r;t?r=i=>new Lr(i):r=i=>new Er(i);let n=r;return Ue(l([g("title","Reload item"),b("p-1 hover:bg-gray-200 rounded"),xe(n(e))]),l([he(l([g("stroke","currentColor"),g("viewBox","0 0 24 24"),g("fill","none"),b("h-5 w-5 text-gray-500"),g("xmlns","http://www.w3.org/2000/svg")]),l([$e(l([g("d","M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"),g("stroke-width","2"),g("stroke-linejoin","round"),g("stroke-linecap","round")]))]))]))}function hh(e,t){let r;t?r=i=>new Lr(i):r=i=>new Er(i);let n=r;return Ue(l([g("title","Download data"),b("p-1 hover:bg-gray-200 rounded"),xe(n(e))]),l([he(l([g("stroke","currentColor"),g("viewBox","0 0 24 24"),g("fill","none"),b("h-5 w-5 text-gray-500"),g("xmlns","http://www.w3.org/2000/svg")]),l([$e(l([g("d","M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"),g("stroke-width","2"),g("stroke-linejoin","round"),g("stroke-linecap","round")]))]))]))}function bf(e,t,r){return Oi(l([b("p-4 border-b hover:bg-gray-50")]),l([T(l([b("flex justify-between items-center")]),l([K(l([b("text-gray-400")]),l([q(t.location.name)])),hh(e,r)]))]))}function ku(){return T(l([b("animate-spin h-5 w-5 border-2 border-gray-500 border-t-transparent rounded-full")]),l([]))}function yf(e,t,r){return Oi(l([b("p-4 border-b hover:bg-gray-50")]),l([T(l([b("flex justify-between items-center")]),l([K(l([b("text-gray-600")]),l([q(t.location.name)])),ku()]))]))}function eo(e,t,r){let n;t?n=Si(e)+" sell orders":n=Si(e)+" buy orders";let i=n,s;return r?s="bg-selected text-white ":s="bg-gray-200 text-gray-700 ",K(l([b(s+"ml-2 text-xs px-2 py-0.5 rounded-full")]),l([q(i)]))}function vf(e,t,r){let n,i=t.buy_orders_status,s=t.sell_orders_status;if(r&&s instanceof Ct)n=ku();else if(r&&s instanceof pr)n=vu(e,r);else{if(r&&s instanceof Vt)throw z("panic","mvu/view/systems_lists",97,"get_selected_system","should not be able to select an empty system",{});if(!r&&i instanceof Ct)n=ku();else if(!r&&i instanceof pr)n=vu(e,r);else throw z("panic","mvu/view/systems_lists",101,"get_selected_system","should not be able to select an empty system",{})}let o=n,a;if(r){let c=t.sell_orders,f=nt(c);a=eo(f,r,!0)}else{let c=t.buy_orders,f=nt(c);a=eo(f,r,!0)}let u=a;return Oi(l([b("p-4 border-b hover:bg-gray-50 bg-indigo-50 border-l-4 border-l-selected")]),l([T(l([b("flex justify-between items-center")]),l([T(l([b("flex items-center")]),l([K(l([b("text-selected font-medium")]),l([q(t.location.name)])),u])),o]))]))}function kf(e,t,r){let n;r?n=a=>new wn(a):n=a=>new bn(a);let i=n,s;if(r){let a=t.sell_orders,u=nt(a);s=eo(u,r,!1)}else{let a=t.buy_orders,u=nt(a);s=eo(u,r,!1)}let o=s;return Oi(l([b("p-4 border-b hover:bg-gray-50 cursor-pointer"),xe(i(e))]),l([T(l([b("flex justify-between items-center")]),l([T(l([b("flex items-center")]),l([hc(l([b("block text-gray-800"),La("#")]),l([q(t.location.name),o]))])),vu(e,r)]))]))}function $h(e,t){let r=Te(e,(n,i)=>{let s,o=i.sell_orders_status;if(t instanceof j&&t[0]===n){let a=t[0];s=vf}else o instanceof Vt?s=bf:o instanceof Ct?s=yf:s=kf;return s(n,i,!0)});return Ie(r)}function xh(e,t){let r=$h(e,t);return T(l([b("w-full md:w-1/2 bg-white rounded-lg shadow-md")]),l([yr(l([b("p-4 font-semibold border-b")]),l([q("From")])),Pl(l([b("h-64 overflow-y-auto")]),r)]))}function gh(e,t){let r=Te(e,(n,i)=>{let s,o=i.buy_orders_status;if(t instanceof j&&t[0]===n){let a=t[0];s=vf}else o instanceof Vt?s=bf:o instanceof Ct?s=yf:s=kf;return s(n,i,!1)});return Ie(r)}function wh(e,t){let r=gh(e,t);return T(l([b("w-full md:w-1/2 bg-white rounded-lg shadow-md")]),l([yr(l([b("p-4 font-semibold border-b")]),l([q("To")])),Pl(l([b("h-64 overflow-y-auto")]),r)]))}function jf(e){let t=xh(e.systems,e.source),r=wh(e.systems,e.destination);return ys(l([b("mb-10")]),l([bs(l([b("text-2xl font-bold mb-4")]),l([q("Systems")])),T(l([b("flex flex-col md:flex-row gap-6")]),l([t,r]))]))}function Of(e){let t=wf(e),r=jf(e),n=hf(e),i=l([r,n]),s=T(l([b("flex-1 overflow-auto pl-14")]),l([T(l([b("max-w-6xl mx-auto p-8")]),i)]));return T(l([b("min-h-screen flex")]),l([t,s]))}var vh="en",kh=0;function jh(e){let t=Z(jc,Re(),(n,i)=>{let s=i[0],o=i[1],a=new xt(o,l([]),new Vt,l([]),new Vt);return H(n,s,a)}),r=wp();return[new I((()=>{let n=Mi();return qt(n)})(),Re(),new C,0,0,t,new C,new C,kh,vh,!1,new C,l([])),r]}function Sf(){let e=yc(jh,_f,Of),t=vc(e,"#app",void 0);if(!t.isOk())throw z("let_assert","eve_arbitrage",20,"main","Pattern match failed, no pattern matched the value.",{value:t})}Sf();
